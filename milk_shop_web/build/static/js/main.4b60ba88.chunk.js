(this["webpackJsonpdtech-web"]=this["webpackJsonpdtech-web"]||[]).push([[0],{258:function(e,t,a){},283:function(e,t,a){e.exports=a(507)},305:function(e,t,a){},311:function(e,t){},313:function(e,t){},349:function(e,t){},350:function(e,t){},424:function(e,t,a){},425:function(e,t,a){},426:function(e,t,a){},427:function(e,t,a){},429:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){},432:function(e,t,a){},433:function(e,t,a){},434:function(e,t,a){},436:function(e,t,a){},493:function(e,t,a){},496:function(e,t,a){},497:function(e,t,a){},498:function(e,t,a){},499:function(e,t,a){},500:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){},506:function(e,t,a){},507:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),l=a.n(c),s=a(4),u=a(20),i=a(59);var o={set:function(e,t){t&&localStorage.setItem(e,JSON.stringify(t))},get:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},remove:function(e){return localStorage.removeItem(e)},clear:function(){return localStorage.clear()}},m={user:o.get("user")||void 0,profile:o.get("profile")||void 0,client:o.get("client")||void 0},d=Object(n.createContext)([m,function(){return null}]),p=function(e,t){var a=t.type,n=Object(i.a)(t,["type"]);switch(a){case"SET_USER":return o.set("user",n.user),o.set("profile",n.profile),Object(u.a)({},e,{user:n.user,profile:n.profile});case"SET_CLIENT":return o.set("client",n.client),Object(u.a)({},e,{client:n.client});case"LOGOUT":return o.remove("user"),o.remove("profile"),o.remove("client"),o.remove("token"),{user:void 0,profile:void 0,client:void 0};default:throw new Error}},f=function(e){var t=Object(n.useReducer)(p,m),a=Object(s.a)(t,2),c=a[0],l=a[1];return r.a.createElement(d.Provider,{value:[c,l]},e.children)},b=a(280),h={type:"hide",message:""},E=Object(n.createContext)((function(){return null})),v=function(e){var t=Object(n.useState)(h),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){if(!c.message)return null;return r.a.createElement(b.a,{style:Object(u.a)({},{position:"fixed",top:0,right:0,zIndex:2,minWidth:"250px",borderRadius:"10px",color:"white",margin:"20px",fontSize:"15px"}),delay:5e3,autohide:!0,show:"hide"!==c.type,onClose:function(){return l({type:"hide"})}},r.a.createElement("div",{className:"alert alert-".concat("error"===c.type?"danger":"success"),style:{marginBottom:0}},r.a.createElement("strong",null,"error"===c.type?"Error!":"Success!")," ",c.message))};return r.a.createElement(E.Provider,{value:l},r.a.createElement(i,null),e.children)},g=a(17),w=a(37),y=Object(w.a)(),O=a(1),j=a.n(O),x=a(6),k=a(13),C=a(100),N=a.n(C),S=a(515),I=a(8),T=a(514);a(305);var R=function(){return r.a.createElement("div",{className:"loader-container center-x center-y",id:"loader"},r.a.createElement(T.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))};function q(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(null),u=Object(s.a)(l,2),i=u[0],o=u[1],m=Object(n.useState)(null),d=Object(s.a)(m,2),p=d[0],f=d[1];return Object(n.useEffect)((function(){function t(){return(t=Object(x.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,e();case 4:a=t.sent,f(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o(t.t0);case 11:return t.prev=11,c(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),{loading:r,error:i,result:p}}function A(e,t){switch(t.type){case"SET_LOADING":return Object(u.a)({},e,{result:null,error:null,loading:!0});case"SET_ERROR":return Object(u.a)({},e,{result:null,error:t.error,loading:!1});case"SET_RESULT":return Object(u.a)({},e,{result:t.result,error:null,loading:!1});case"SET_OFFSET":return Object(u.a)({},e,{result:null,error:null,loading:!0,offset:t.offset});case"SET_LIMIT":return Object(u.a)({},e,{result:null,error:null,loading:!0,limit:t.limit});case"SET_REFRESH":return e.loading?e:Object(u.a)({},e,{result:null,error:null,loading:!0,refresh:!e.refresh});default:throw new Error("Unknown action: ".concat(t))}}function L(e,t,a){var r=Object(n.useReducer)(A,{loading:!0,error:null,result:null,offset:t,limit:a,refresh:!1}),c=Object(s.a)(r,2),l=c[0],u=c[1];Object(n.useEffect)((function(){function t(){return(t=Object(x.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(l.offset,l.limit);case 3:a=t.sent,u({type:"SET_RESULT",result:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),u({type:"SET_ERROR",error:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,l.offset,l.limit,l.refresh]);var i=Object(n.useCallback)((function(e){return u({type:"SET_OFFSET",offset:e})}),[]),o=Object(n.useCallback)((function(e){return u({type:"SET_LIMIT",limit:e})}),[]),m=Object(n.useCallback)((function(){return u({type:"SET_REFRESH"})}),[]);return{loading:l.loading,error:l.error,result:l.result,offset:l.offset,limit:l.limit,refresh:l.refresh,setOffset:i,setLimit:o,setRefresh:m}}function D(e){var t=q(e);return function(e){return function(){return t.loading?r.a.createElement(R,null):r.a.createElement(e,t)}}}var U=a(264),M=a(265),F=a(281),Q=a(266),P=a(282),z=a(267),V=a.n(z),H=function(e){Object(Q.a)(a,e);var t=Object(F.a)(a);function a(e,n){var r;return Object(M.a)(this,a),(r=t.call(this,e)).status=void 0,r.status=n,r}return a}(Object(P.a)(Error)),K=V.a.create();function _(){return(_=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}K.interceptors.response.use((function(e){return e}),(function(e){return e.response?(401===e.response.status&&(o.clear(),y.push("/")),e.response.data.message?Promise.reject(new H(e.response.data.message,e.response.status)):Promise.reject(new H("Request failed with ".concat(e.response.status),e.response.status))):Promise.reject(new H("Unable to reach server",0))}));var Y=function(e){return _.apply(this,arguments)},G=function(e){var t={"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:""},a=o.get("token");return a&&(t.Authorization="Bearer ".concat(a)),e?Object.assign({},t,e):t},B={request:function(e){var t=e.method,a=e.url,n=e.params,r=e.data,c=e.header;return Y({baseURL:"http://localhost:3000",method:t,url:a,params:n,data:r,headers:G(c)})}};function Z(e){return J.apply(this,arguments)}function J(){return(J=Object(x.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.request({url:"/users/authenticate",method:"post",data:t});case 2:return a=e.sent,n=a.token,r=U.decode(n,{json:!0}),o.set("token",n),e.abrupt("return",{id:r.userId,role:r.role});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return B.request({url:"/users/accept-invitation?token=".concat(encodeURIComponent(e)),method:"post",data:t})}function $(e){return B.request({url:"/users/".concat(e),method:"get"})}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return B.request({url:"/users?offset=".concat(e,"&limit=").concat(t),method:"get"})}function ee(e,t){return B.request({url:"/clients/".concat(t,"/users"),method:"post",data:e})}function te(e,t){return B.request({url:"/clients/".concat(e,"/users/").concat(t,"/resend-invitation"),method:"post"})}function ae(e,t,a){return B.request({url:"/clients/".concat(t,"/users/").concat(a),method:"put",data:e})}function ne(e,t){return B.request({url:"/clients/".concat(e,"/users/").concat(t),method:"delete"})}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return B.request({url:"/clients/".concat(e,"/users?offset=").concat(t,"&limit=").concat(a),method:"get"})}var ce=a(524);function le(e){var t=Object(k.d)(e),a=Object(s.a)(t,2),n=a[0],c=a[1],l=(n.value||e.value||"").toString();return r.a.createElement(ce.a.Group,null,e.label&&r.a.createElement(ce.a.Label,null,e.label),r.a.createElement(ce.a.Control,Object.assign({},n,e,{value:l,isInvalid:!(!c.touched||!c.error)})),c.touched&&c.error?r.a.createElement(ce.a.Control.Feedback,{type:"invalid"},c.error):null)}var se,ue=function(){var e=Object(n.useContext)(E),t=Object(n.useContext)(d),a=Object(s.a)(t,2)[1],c=Object(g.h)(),l=Object(g.g)(),u=N.a.parse(c.search).token||"",o=q(Object(n.useCallback)((function(){return function(e){return B.request({url:"/users/invitation?token=".concat(encodeURIComponent(e)),method:"get"})}(u)}),[u])),m=o.error,p=o.loading,f=o.result;if(p)return r.a.createElement("span",null,"Please wait...");if(m)return m instanceof H&&409===m.status?(l.push("/login",{message:"Your account is already setup. Please login."}),r.a.createElement("span",null,"Please wait...")):r.a.createElement("span",null,r.a.createElement("b",null,"Error:")," ",m.message);if(!f)return r.a.createElement("span",null,"Sorry, we got unexpected result from the server.");var b=I.f().shape({firstName:I.h().trim().min(1).max(50).required("Required").label("First name"),lastName:I.h().trim().min(1).max(50).required("Required").label("Last name"),password:I.h().required("Required").label("Password"),confirmPassword:I.h().required("Required").oneOf([I.g("password"),null],"Password must match").label("Confirm Password")}),h=function(){var t=Object(x.a)(j.a.mark((function t(n){var r,c,s,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=n.confirmPassword,c=Object(i.a)(n,["confirmPassword"]),t.next=4,W(u,c);case 4:return t.next=6,Z({email:f.email,password:r});case 6:return s=t.sent,t.next=9,$("me");case 9:o=t.sent,a({type:"SET_USER",user:s,profile:o}),l.push("/"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e({type:"error",message:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Account Setup"),r.a.createElement("p",null,"Hi ",f.email,", welcome to DTech!"),r.a.createElement("p",null,"Please complete the following form to create an account:"),r.a.createElement(k.c,{initialValues:{firstName:"",lastName:"",password:"",confirmPassword:""},validationSchema:b,onSubmit:h},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"text",name:"firstName",label:"First name",disabled:t}),r.a.createElement(le,{type:"text",name:"lastName",label:"Last name",disabled:t}),r.a.createElement(le,{type:"password",name:"password",label:"Password",disabled:t}),r.a.createElement(le,{type:"password",name:"confirmPassword",label:"Confirm Password",disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Go"))})))};!function(e){e.ADMIN="ADMIN",e.CLIENT="CLIENT"}(se||(se={}));var ie,oe={ADMIN:"Super Admin",CLIENT:"Client User"};!function(e){e.ADMIN="ADMIN",e.ANALYST="ANALYST",e.VETTER="VETTER"}(ie||(ie={}));var me={ADMIN:"Administrator",ANALYST:"Analyst",VETTER:"Vetter"};var de=function(){var e=Object(n.useContext)(E),t=Object(n.useContext)(d),a=Object(s.a)(t,2),c=a[0],l=c.user,u=c.client,i=a[1];if(!l)throw new Error("User expected");return null===localStorage.getItem("token")&&(i({type:"LOGOUT"}),e({type:"error",message:"Session expired. Please login again."})),l.role===se.ADMIN?r.a.createElement(g.a,{to:"/dashboard"}):l.role===se.CLIENT?u?r.a.createElement(g.a,{to:"/clients/".concat(u.id,"/dashboard")}):r.a.createElement(g.a,{to:"/clients"}):null},pe=a(516);function fe(e){return be.apply(this,arguments)}function be(){return(be=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(x.a)(j.a.mark((function e(){var t,a,n=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,a=n.length>1&&void 0!==n[1]?n[1]:10,e.abrupt("return",B.request({url:"/clients?offset=".concat(t,"&limit=").concat(a),method:"get"}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(x.a)(j.a.mark((function e(t){var a,n,r=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:0,n=r.length>2&&void 0!==r[2]?r[2]:10,e.abrupt("return",B.request({url:"/clients?filter=".concat(t,"&offset=").concat(a,"&limit=").concat(n),method:"get"}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a),method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe=function(){var e=Object(n.useContext)(E),t=Object(n.useContext)(d),a=Object(s.a)(t,2)[1],c=Object(g.g)(),l=Object(g.h)(),u=I.f().shape({email:I.h().email().required("Required").label("Email"),password:I.h().required("Required").label("Password")}),i=function(){var t=Object(x.a)(j.a.mark((function t(n){var r,u,i,o,m,d,p;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z(n);case 3:return r=t.sent,t.next=6,$("me");case 6:if(u=t.sent,r.role!==se.CLIENT){t.next=23;break}return t.next=10,ve("all");case 10:if(i=t.sent,o=i.total,m=Object(s.a)(i.data,1),d=m[0],a({type:"SET_USER",user:r,profile:u}),1!==o||!d.invitationAccepted){t.next=21;break}return a({type:"SET_CLIENT",client:{id:d.id,name:d.name,role:d.clientRole}}),c.push("/"),t.abrupt("return");case 21:return c.push("/clients"),t.abrupt("return");case 23:a({type:"SET_USER",user:r,profile:u}),p=l.state&&l.state.redirect||"/",c.push(p),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(0),e({type:"error",message:t.t0.message});case 31:case"end":return t.stop()}}),t,null,[[0,28]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Login"),l.state&&l.state.message&&r.a.createElement(pe.a,{variant:"info"},l.state.message),r.a.createElement(k.c,{initialValues:{email:"",password:""},validationSchema:u,onSubmit:i},r.a.createElement(k.b,null,r.a.createElement(le,{type:"email",placeholder:"Email",name:"email"}),r.a.createElement(le,{type:"password",placeholder:"Password",name:"password"}),r.a.createElement(S.a,{size:"lg",block:!0,type:"submit",className:"bg-blue"},"Login"))))},je=a(86),xe=a(15),ke=a(517),Ce=a(518),Ne=a(270);function Se(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/keywordlists",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){return Re.apply(this,arguments)}function Re(){return(Re=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/keywordlists/".concat(a),method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(x.a)(j.a.mark((function e(){var t,a,n=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,a=n.length>1&&void 0!==n[1]?n[1]:10,e.abrupt("return",B.request({url:"/keywordlists?offset=".concat(t,"&limit=").concat(a),method:"get"}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return De.apply(this,arguments)}function De(){return(De=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/keywordlists/".concat(t),method:"get"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B.request({url:"/keywordlists/".concat(t),method:"delete"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/keywordlists"),method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t,a){return ze.apply(this,arguments)}function ze(){return(ze=Object(x.a)(j.a.mark((function e(t,a,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/keywordlists/").concat(n),method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return He.apply(this,arguments)}function He(){return(He=Object(x.a)(j.a.mark((function e(t){var a,n,r,c,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:0,n=l.length>2&&void 0!==l[2]?l[2]:10,r=l.length>3&&void 0!==l[3]?l[3]:"",c="/clients/".concat(t,"/keywordlists?offset=").concat(a,"&limit=").concat(n),""!==r&&(c+="&q=".concat(r)),e.abrupt("return",B.request({url:c,method:"get"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(t,"/keywordlists/").concat(a),method:"get"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(t,"/keywordlists/").concat(a),method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/tags",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t){return We.apply(this,arguments)}function We(){return(We=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/tags/".concat(a),method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(x.a)(j.a.mark((function e(){var t,a,n=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,a=n.length>1&&void 0!==n[1]?n[1]:10,e.abrupt("return",B.request({url:"/tags?offset=".concat(t,"&limit=").concat(a),method:"get"}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/tags/".concat(t),method:"get"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/tags/".concat(t),method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e,t){return ct.apply(this,arguments)}function ct(){return(ct=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/tags"),method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t,a){return st.apply(this,arguments)}function st(){return(st=Object(x.a)(j.a.mark((function e(t,a,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/tags/").concat(n),method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return it.apply(this,arguments)}function it(){return(it=Object(x.a)(j.a.mark((function e(t){var a,n,r,c,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:0,n=l.length>2&&void 0!==l[2]?l[2]:10,r=l.length>3&&void 0!==l[3]?l[3]:"",c="/clients/".concat(t,"/tags?offset=").concat(a,"&limit=").concat(n),""!==r&&(c+="&q=".concat(r)),e.abrupt("return",B.request({url:c,method:"get"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t){return mt.apply(this,arguments)}function mt(){return(mt=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(t,"/tags/").concat(a),method:"get"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(t,"/tags/").concat(a),method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/targets/search?platform=".concat(t.platform,"&handle=").concat(t.handle),method:"get",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){return Et.apply(this,arguments)}function Et(){return(Et=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/targets",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(){return gt.apply(this,arguments)}function gt(){return(gt=Object(x.a)(j.a.mark((function e(){var t,a,n,r,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:0,a=c.length>1&&void 0!==c[1]?c[1]:10,n=c.length>2&&void 0!==c[2]?c[2]:"",r="/targets?offset=".concat(t,"&limit=").concat(a),""!==n&&(r+="&q=".concat(n)),e.abrupt("return",B.request({url:r,method:"get"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e){return yt.apply(this,arguments)}function yt(){return(yt=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/targets/".concat(t),method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/targets"),method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(x.a)(j.a.mark((function e(t){var a,n,r,c,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:0,n=l.length>2&&void 0!==l[2]?l[2]:10,r=l.length>3&&void 0!==l[3]?l[3]:"",c="/clients/".concat(t,"/targets?offset=").concat(a,"&limit=").concat(n),""!==r&&(c+="&q=".concat(r)),e.abrupt("return",B.request({url:c,method:"get"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(t,"/targets/").concat(a),method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var St=a(19);a(424);function It(e){return r.a.createElement(S.a,Object.assign({className:"button-icon"},e),r.a.createElement(St.a,{icon:xe.m}))}function Tt(e){return r.a.createElement(S.a,Object.assign({className:"button-icon",variant:"danger"},e),r.a.createElement(St.a,{icon:xe.r}))}function Rt(e){return r.a.createElement(S.a,Object.assign({className:"button-icon",variant:"danger"},e),r.a.createElement(St.a,{icon:xe.s}))}function qt(e){return r.a.createElement(S.a,Object.assign({className:"button-icon"},e),r.a.createElement(St.a,{icon:xe.l}))}function At(e){return r.a.createElement(S.a,Object.assign({className:"button-icon"},e),r.a.createElement(St.a,{icon:xe.b}))}function Lt(e){return r.a.createElement(S.a,Object.assign({className:"button-icon"},e),r.a.createElement(St.a,{icon:xe.h}))}function Dt(e){return r.a.createElement(S.a,Object.assign({className:"button-icon"},e),r.a.createElement(St.a,{icon:xe.g}))}function Ut(e){var t=e.entity,a=e.count,n=e.onAdd||function(){alert("Not implemented yet")};return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,t),r.a.createElement("div",{className:"space-between-y"},r.a.createElement("span",null,void 0!==a?a:"-"," ",t),r.a.createElement(It,{onClick:n})))}function Mt(e){var t=e.children,a=e.total,n=e.limit,c=[],l=r.a.Children.toArray(t);n>l.length&&(n=l.length);var s=l.slice(0,n);for(var u in s.length<a&&s.push("".concat(a-s.length," more...")),s){var i=parseInt(u),o=s[i];s.length>1&&i===s.length-1&&c.push("and "),c.push(o),s.length>2&&i<s.length-1&&c.push(","),s.length>1&&i<s.length-1&&c.push(" ")}return r.a.createElement(r.a.Fragment,null,c)}function Ft(e){var t=e.scope,a=void 0,n=xe.i;switch(t){case"global":a="Global",n=xe.i;break;case"client":a="Visible to all users",n=xe.u;break;case"user":a="Visible only to me",n=xe.t}return r.a.createElement(St.a,{title:a,icon:n,style:{width:"25px"}})}a(425);function Qt(e){var t=e.keywordlist,a=e.size,n=void 0===a?"lg":a,c=e.keywordLimit,l=void 0===c?2:c,s=t.keywordCount,u=t.fewKeywords;return r.a.createElement("div",{className:"keywordlist-view keywordlist-view-".concat(n)},function(e){return void 0!==e.scope}(t)?r.a.createElement(Ft,{scope:t.scope}):null,r.a.createElement("span",{className:"keywordlist-name"},t.name),("lg"===n||"md"===n)&&r.a.createElement("div",{className:"keywords"},r.a.createElement(St.a,{title:"Keywords",icon:xe.j,style:{width:"25px"}}),r.a.createElement(Mt,{total:s,limit:l},u)))}function Pt(e){var t=e.result;return r.a.createElement("div",null,r.a.createElement("h4",null,"Keyword Lists"),r.a.createElement("div",{className:"space-between-y"},r.a.createElement(ke.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,t.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(Qt,{keywordlist:e})))}))))))}var zt=function(){var e=Object(n.useContext)(d),t=Object(s.a)(e,1)[0],a=t.user,c=t.client;if(!a)throw new Error("User expected");if(!c)throw new Error("Client expected");var l=Object(g.g)(),u=Object(n.useCallback)((function(){return re(c.id)}),[c.id]),i=Object(n.useCallback)((function(){return Ve(c.id)}),[c.id]),o=Object(n.useCallback)((function(){return xt(c.id)}),[c.id]),m=Object(n.useCallback)((function(){return ut(c.id)}),[c.id]),p=[];if(a.role===se.ADMIN||a.role===se.CLIENT&&c.role===ie.ADMIN){var f=D(u);p.push(f((function(e){var t=e.result;return r.a.createElement(Ut,{entity:"Users",count:null===t||void 0===t?void 0:t.total,onAdd:function(){return l.push("/clients/".concat(c.id,"/users"))}})})))}var b=D(i);p.push(b((function(e){var t=e.result;return r.a.createElement(Ut,{entity:"Keyword Lists",count:null===t||void 0===t?void 0:t.total,onAdd:function(){return l.push("/clients/".concat(c.id,"/keywordlists"))}})})));var h=D(o);p.push(h((function(e){var t=e.result;return r.a.createElement(Ut,{entity:"Targets",count:null===t||void 0===t?void 0:t.total,onAdd:function(){return l.push("/clients/".concat(c.id,"/targets"))}})})));var E=D(m);p.push(E((function(e){var t=e.result;return r.a.createElement(Ut,{entity:"Tags",count:null===t||void 0===t?void 0:t.total,onAdd:function(){return l.push("/clients/".concat(c.id,"/tags"))}})}))),a.role===se.CLIENT&&p.push((function(){return r.a.createElement(Ut,{entity:"Alerts"})}));var v=b((function(e){var t=e.error,a=e.result;return a?r.a.createElement(Pt,{result:a}):r.a.createElement("div",null,null===t||void 0===t?void 0:t.message)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{xs:"5"},p.map((function(e,t){return r.a.createElement(e,{key:t})}))),r.a.createElement(Ne.a,{xs:{span:5,offset:1},className:"shadow-box"},r.a.createElement(v,null))))};function Vt(e){var t=Object(k.d)({placeholder:e.placeholder,name:e.name}),a=Object(s.a)(t,2),n=a[0],c=a[1];return r.a.createElement(ce.a.Group,null,r.a.createElement(ce.a.Check,Object.assign({checked:n.value,id:n.name},n,e,{isInvalid:!(!c.touched||!c.error)})),c.touched&&c.error?r.a.createElement(ce.a.Control.Feedback,{type:"invalid"},c.error):null)}var Ht=a(197),Kt=a(151);a(426);function _t(e){var t=Object(k.d)(e),a=Object(s.a)(t,3),c=a[0],l=a[1],i=a[2],o=Object(n.useState)(""),m=Object(s.a)(o,2),d=m[0],p=m[1],f=(c.value||[]).map((function(e){return{label:e,value:e}})),b=function(e){i.setValue((e||[]).map((function(e){return e.value})))};return r.a.createElement(ce.a.Group,{className:"multi-select-field"},r.a.createElement(ce.a.Label,null,e.label),r.a.createElement(Kt.a,{isMulti:!0,isClearable:!0,value:f,inputValue:d,placeholder:e.placeholder||"Add ".concat(e.label,"..."),onChange:b,onInputChange:function(e){p(e)},onKeyDown:function(e){if(d)switch(e.key){case"Enter":case"Tab":d&&!f.map((function(e){return e.value})).includes(d)&&b([].concat(Object(Ht.a)(f),[{label:d,value:d}])),p(""),e.preventDefault()}},onBlur:function(e){d&&!f.map((function(e){return e.value})).includes(d)&&b([].concat(Object(Ht.a)(f),[{label:d,value:d}])),p(""),c.onBlur(e)},onFocus:function(){return i.setTouched(!0)},menuIsOpen:!1,className:"is-invalid chip-view",components:{DropdownIndicator:null},isDisabled:e.disabled,styles:{control:function(e,t){return Object(u.a)({},e,{transition:"border-color .15s ease-in-out,box-shadow .15s ease-in-out"},t.isFocused&&{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",borderColor:"#80bdff",":hover":{borderColor:"#80bdff"}})}}}),l.touched&&l.error?r.a.createElement(ce.a.Control.Feedback,{type:"invalid"},l.error):null)}var Yt=function(e){var t=e.onUpdate,a=Object(n.useContext)(E),c=Object(n.useContext)(d),l=Object(s.a)(c,1)[0],u=l.user,i=l.client;if(!u)throw new Error("User expected");if(!i)throw new Error("Client expected");var o=Object(g.i)(),m=o.clientId,p=o.editId;if(!m)throw new Error("Client ID not found");var f=u.role===se.CLIENT&&!!i.role&&[ie.ANALYST,ie.VETTER].includes(i.role),b=u.role===se.ADMIN,h=Object(n.useState)({name:"",keywords:[],isUserSpecific:f}),v=Object(s.a)(h,2),w=v[0],y=v[1],O=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name"),keywords:I.a(I.h().trim().min(3).max(50).label("Keyword")).required("Required").label("Keyword list"),isUserSpecific:I.b().required("Required").label("User specific")}),C=!1;p||(C=!(b||f)),Object(n.useEffect)((function(){function e(){return(e=Object(x.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}throw new Error("Client ID not found");case 2:return e.prev=2,e.next=5,Ke(m,t);case 5:n=e.sent,y({name:n.name,keywords:n.keywords,isUserSpecific:"user"===n.scope}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}p&&function(t){e.apply(this,arguments)}(p)}),[m,p,a]);var N=function(){var e=Object(x.a)(j.a.mark((function e(n,r){var c,l,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.resetForm,e.prev=1,!p){e.next=9;break}return l={name:n.name,keywords:n.keywords},e.next=6,Pe(l,m,p);case 6:a({type:"success",message:"Keyword list edited successfully"}),e.next=14;break;case 9:return s={name:n.name,keywords:n.keywords,isUserSpecific:n.isUserSpecific},e.next=12,Fe(s,m);case 12:c(),a({type:"success",message:"Keyword list created successfully"});case 14:t&&t(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),a({type:"error",message:e.t0.message});case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,p?"Edit":"Add"," Keyword List"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:w,validationSchema:O,onSubmit:N},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"text",name:"name",label:"Name",disabled:t}),r.a.createElement(_t,{name:"keywords",label:"Keywords",disabled:t}),C&&r.a.createElement(Vt,{name:"isUserSpecific",label:"Visible only to me",disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Save"))})))},Gt=a(523);function Bt(e){var t=e.show,a=e.title,c=e.message,l=e.onConfirm,u=e.onClose,i=e.confirmValue,o=e.entity,m=Object(n.useState)(!1),d=Object(s.a)(m,2),p=d[0],f=d[1],b=Object(n.useState)(!0),h=Object(s.a)(b,2),E=h[0],v=h[1],g=Object(n.useState)(),w=Object(s.a)(g,2),y=w[0],O=w[1];Object(n.useEffect)((function(){i&&v(y===i(o))}),[y,i,o]);var k=Object(n.useCallback)(Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,l();case 3:f(!1);case 4:case"end":return e.stop()}}),e)}))),[f,l]),C=null;return i&&(C=r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),"Please type ",r.a.createElement("strong",null,i(o))," to confirm:",r.a.createElement(ce.a.Group,null,r.a.createElement(ce.a.Control,{type:"text",placeholder:"Type ".concat(i(o)," here..."),onChange:function(e){return O(e.target.value)}})))),r.a.createElement(Gt.a,{show:!!t,onHide:u},r.a.createElement(Gt.a.Header,null,r.a.createElement(Gt.a.Title,null,a)),r.a.createElement(Gt.a.Body,null,c(o),C),r.a.createElement(Gt.a.Footer,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{variant:"primary",onClick:u,disabled:p},"Cancel"),r.a.createElement(S.a,{variant:"danger",onClick:k,disabled:p||!E},"Delete"))))}function Zt(e,t,a){var c=Object(n.useState)(null),l=Object(s.a)(c,2),u=l[0],i=l[1],o=Object(n.useCallback)(Object(x.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u){t.next=2;break}throw new Error("Entity required");case 2:return t.next=4,e(u);case 4:i(null);case 5:case"end":return t.stop()}}),t)}))),[u,e]),m=Object(n.useCallback)((function(){i(null)}),[]);return[Object(n.useCallback)((function(e){return u?r.a.createElement(Bt,Object.assign({entity:u,show:!!u,title:t,message:function(){return r.a.createElement(r.a.Fragment,null,"Do you really want to delete ",r.a.createElement("strong",null,a(u)),"?")},onClose:m,onConfirm:o},e)):null}),[m,o,u,a,t]),i]}var Jt=a(527);a(427);var Wt=function(e){var t=e.setPageIndex,a=e.pageIndex,n=e.pageSize,c=e.total;if(0===c)return null;var l=Math.ceil(c/n),s=function(e){for(var t=e+1,a=[];t<=l-1&&a.length<3;)a.push(t),t++;return a},u=s(0);l>3&&(u=s(a<3?a-1:a>l-3?l-3:a-2));var i=function(e){return e&&r.a.createElement(Jt.a.Ellipsis,null)};return r.a.createElement("div",{className:"center-x"},r.a.createElement(Jt.a,null,r.a.createElement(Jt.a.Prev,{onClick:function(){return t(a-1)},disabled:a<=1}),1!==a&&l>3&&r.a.createElement(Jt.a.Item,{active:1===a,onClick:function(){return t(1)}},"1"),i(a>3),u.map((function(e,n){return r.a.createElement(Jt.a.Item,{key:n,active:a===e,onClick:function(){return t(e)}},e)})),i(a<=l-3),r.a.createElement(Jt.a.Item,{active:a===l,onClick:function(){return t(l)}},l),r.a.createElement(Jt.a.Next,{onClick:function(){return t(a+1)},disabled:a>=l})))},$t=a(272);a(429);var Xt=function(e){var t=e.columns,a=e.data,n=Object($t.useTable)({columns:t,data:a}),c=n.getTableProps,l=n.getTableBodyProps,s=n.headerGroups,u=n.rows,i=n.prepareRow;return r.a.createElement(ke.a,Object.assign({responsive:!0,hover:!0},c()),r.a.createElement("thead",null,s.map((function(e,t){return r.a.createElement("tr",Object.assign({key:t},e.getHeaderGroupProps()),e.headers.map((function(e,t){return r.a.createElement("th",Object.assign({key:t},e.getHeaderProps()),e.render("Header"))})))}))),r.a.createElement("tbody",l(),u.map((function(e,t){return i(e),r.a.createElement("tr",Object.assign({key:t},e.getRowProps()),e.cells.map((function(e,t){return r.a.createElement("td",Object.assign({key:t},e.getCellProps()),e.render("Cell"))})))}))))};function ea(e,t,a){var c=L(e,0,t),l=c.loading,s=c.error,u=c.result,i=c.offset,o=c.setOffset,m=c.setRefresh,d=Object(n.useCallback)((function(e){return o((e-1)*t)}),[t,o]);return[Object(n.useCallback)((function(){return l||!u?l?r.a.createElement(R,null):r.a.createElement("div",null,null===s||void 0===s?void 0:s.message):r.a.createElement(r.a.Fragment,null,r.a.createElement(a,{data:u.data,total:u.total}),r.a.createElement(Wt,{setPageIndex:d,pageIndex:i/t+1,pageSize:t,total:u.total}))}),[l,s,u,i,t,d]),m]}function ta(e){var t=e.fn,a=e.pageSize,c=e.columns,l=e.refresh,u=void 0!==l&&l,i=function(e,t,a){var c=L(e,0,t),l=c.loading,s=c.error,u=c.result,i=c.offset,o=c.setOffset,m=c.setRefresh,d=Object(n.useCallback)((function(e){return o((e-1)*t)}),[t,o]);return[function(){return l||!u?l?r.a.createElement(R,null):r.a.createElement("div",null,null===s||void 0===s?void 0:s.message):r.a.createElement(r.a.Fragment,null,r.a.createElement(a,{data:u.data,total:u.total}),r.a.createElement(Wt,{setPageIndex:d,pageIndex:i/t+1,pageSize:t,total:u.total}))},m]}(t,a,(function(e){var t=e.data,a=e.total;return r.a.createElement(Xt,{columns:c,data:t,total:a})})),o=Object(s.a)(i,2),m=o[0],d=o[1];return Object(n.useEffect)((function(){d()}),[u,d]),r.a.createElement(m,null)}var aa=function(e){var t=e.refresh,a=e.onUpdate,c=Object(n.useContext)(d),l=Object(s.a)(c,1)[0],u=l.user,i=l.client;if(!u)throw new Error("User expected");if(!i)throw new Error("Client expected");var o=Object(g.i)().clientId;if(!o)throw new Error("Client ID not found");var m=Object(n.useContext)(E),p=Object(g.g)(),f=Object(n.useCallback)((function(e,t){return Ve(o,e,t)}),[o]),b=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye(o,t.id);case 3:m({type:"success",message:"Keyword list deleted"}),a&&a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[o,a,m]),"Delete Keyword List",Object(n.useCallback)((function(e){return e.name}),[])),h=Object(s.a)(b,2),v=h[0],w=h[1],y=[{Header:"Name",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(Qt,{keywordlist:t,size:"lg"})}},{Header:" ",Cell:function(e){var t=e.cell.row.original;return"user"===t.scope||"client"===t.scope&&u.role===se.ADMIN||"client"===t.scope&&i.role&&[ie.ADMIN].includes(i.role)?r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{onClick:function(){return p.push("/clients/".concat(o,"/keywordlists/edit/").concat(t.id))}}),r.a.createElement(Rt,{onClick:function(){return w(t)}})):null}}];return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"Keyword Lists"),r.a.createElement(ta,{fn:f,pageSize:10,columns:y,refresh:t}),r.a.createElement(v,null))};var na=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage Keyword Lists"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement(aa,{refresh:a,onUpdate:function(){return c(!a)}})),r.a.createElement(Ne.a,{md:"5"},r.a.createElement(Yt,{onUpdate:function(){return c(!a)}}))))},ra=a(519);a(430);function ca(e){var t=e.target,a=e.size,n=void 0===a?"lg":a,c=e.onClick,l=r.a.createElement("a",{href:"#fake",target:"_blank",rel:"noopener noreferrer",className:"target-handle"},"@",t.profile.handle);return"twitter"===t.platform&&(l=r.a.createElement("a",{href:"https://twitter.com/".concat(t.profile.handle),target:"_blank",rel:"noopener noreferrer",className:"target-handle"},"@",t.profile.handle)),r.a.createElement("div",{onClick:c,className:"target-view target-view-".concat(n)},r.a.createElement("div",{className:"target-img"},r.a.createElement(ra.a,{src:t.profile.photoURL,roundedCircle:!0})),r.a.createElement("div",{className:"target-text"},r.a.createElement("span",{className:"target-name"},t.profile.name),"lg"===n&&l,"lg"===n&&"fetching"===t.profile.dataStatus&&r.a.createElement("span",{className:"target-info"},"Data collection in progress..."),"md"===n&&r.a.createElement("span",{className:"target-handle"},"@",t.profile.handle)))}var la=a(520);a(431);function sa(e){var t=e.debounce,a=e.fetchOptions,c=e.getOptionValue,l=e.getOptionLabel,o=e.renderOption,m=e.renderSelectedOption,d=Object(i.a)(e,["debounce","fetchOptions","getOptionValue","getOptionLabel","renderOption","renderSelectedOption"]),p=Object(k.d)(d),f=Object(s.a)(p,3),b=f[0],h=f[1],E=f[2],v=Object(n.useState)([]),g=Object(s.a)(v,2),w=g[0],y=g[1],O=Object(la.a)(function(){var e=Object(x.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:n=e.sent,y(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t),C=Object(s.a)(O,1)[0],N=Object(n.useCallback)((function(e){return E.setValue(e||[])}),[E]),S=Object(n.useCallback)((function(){return E.setTouched(!0)}),[E]),I=Object(n.useCallback)((function(e){return r.a.createElement("div",Object.assign({ref:e.innerRef},e.innerProps,{className:e.isFocused?"typeaheadfield-opt typeaheadfield-opt-focused":"typeaheadfield-opt"}),o&&o(e.data))}),[o]),T=Object(n.useCallback)((function(e){var t=e.data;return r.a.createElement("div",{className:"typeaheadfield-selected-opt"},m&&m(t))}),[m]),R=Object(n.useMemo)((function(){var e={};return o&&(e=Object(u.a)({},e,{Option:I})),m&&(e=Object(u.a)({},e,{MultiValueLabel:T})),e}),[o,I,m,T]);return r.a.createElement(ce.a.Group,{className:"multi-select-field"},r.a.createElement(ce.a.Label,null,d.label),r.a.createElement(Kt.a,{isMulti:!0,isSearchable:!0,value:b.value,placeholder:"Choose ".concat(d.label,"..."),options:w,getOptionLabel:l,getOptionValue:c,onChange:N,onInputChange:C,onBlur:b.onBlur,onFocus:S,className:"is-invalid",components:R,isDisabled:d.disabled,styles:{control:function(e,t){return Object(u.a)({},e,{transition:"border-color .15s ease-in-out,box-shadow .15s ease-in-out"},t.isFocused&&{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",borderColor:"#80bdff",":hover":{borderColor:"#80bdff"}})}}}),h.touched&&h.error?r.a.createElement(ce.a.Control.Feedback,{type:"invalid"},h.error):null)}function ua(e){var t=Object(n.useCallback)((function(e){return e.id}),[]),a=Object(n.useCallback)((function(e){return"".concat(e.profile.name," ").concat(e.profile.handle)}),[]),c=Object(n.useCallback)((function(e){return r.a.createElement(ca,{target:e,size:"md"})}),[]),l=Object(n.useCallback)((function(e){return r.a.createElement(ca,{target:e,size:"sm"})}),[]);return r.a.createElement(sa,Object.assign({label:"Targets",getOptionValue:t,getOptionLabel:a,renderOption:c,renderSelectedOption:l,debounce:500},e))}var ia=function(e){var t=e.onUpdate,a=Object(n.useContext)(E),c=Object(n.useContext)(d),l=Object(s.a)(c,1)[0],u=l.user,i=l.client;if(!u)throw new Error("User expected");if(!i)throw new Error("Client expected");var o=Object(g.i)(),m=o.clientId,p=o.editId;if(!m)throw new Error("Client ID not found");var f=u.role===se.CLIENT&&!!i.role&&[ie.ANALYST,ie.VETTER].includes(i.role),b=u.role===se.ADMIN,h=Object(n.useState)({name:"",targets:[],isUserSpecific:f}),v=Object(s.a)(h,2),w=v[0],y=v[1],O=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name"),targets:I.a().min(1).required("Required").label("Targets"),isUserSpecific:I.b().required("Required").label("User specific")}),C=!1;p||(C=!(b||f)),Object(n.useEffect)((function(){function e(){return(e=Object(x.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}throw new Error("Client ID not found");case 2:return e.prev=2,e.next=5,ot(m,t);case 5:n=e.sent,y({name:n.name,targets:n.targets,isUserSpecific:"user"===n.scope}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}p&&function(t){e.apply(this,arguments)}(p)}),[m,p,a]);var N=Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(m,0,5,t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m]),T=function(){var e=Object(x.a)(j.a.mark((function e(n,r){var c,l,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.resetForm,e.prev=1,!p){e.next=9;break}return l={name:n.name,targetIds:n.targets.map((function(e){return e.id}))},e.next=6,lt(l,m,p);case 6:a({type:"success",message:"Tag edited successfully"}),e.next=14;break;case 9:return s={name:n.name,targetIds:n.targets.map((function(e){return e.id})),isUserSpecific:n.isUserSpecific},e.next=12,rt(s,m);case 12:c(),a({type:"success",message:"Tag created successfully"});case 14:t&&t(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),a({type:"error",message:e.t0.message});case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,p?"Edit":"Add"," Tag"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:w,validationSchema:O,onSubmit:T},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"text",name:"name",label:"Name",disabled:t}),r.a.createElement(ua,{name:"targets",fetchOptions:N,disabled:t}),C&&r.a.createElement(Vt,{name:"isUserSpecific",label:"Visible only to me"}),r.a.createElement(S.a,{type:"submit",disabled:t},"Save"))})))};a(432);function oa(e){var t=e.tag,a=e.size,n=void 0===a?"lg":a,c=e.targetLimit,l=void 0===c?2:c,s=t.targetCount,u=t.fewTargets;return r.a.createElement("div",{className:"tag-view tag-view-".concat(n)},function(e){return void 0!==e.scope}(t)?r.a.createElement(Ft,{scope:t.scope}):null,r.a.createElement("span",{className:"tag-name"},t.name),("lg"===n||"md"===n)&&r.a.createElement("div",{className:"tag-targets"},r.a.createElement(Mt,{total:s,limit:l},u.map((function(e){return r.a.createElement(ca,{key:e.id,target:e,size:"sm"})})))))}var ma=function(e){var t=e.refresh,a=e.onUpdate,c=Object(n.useContext)(d),l=Object(s.a)(c,1)[0],u=l.user,i=l.client;if(!u)throw new Error("User expected");if(!i)throw new Error("Client expected");var o=Object(g.i)().clientId;if(!o)throw new Error("Client ID not found");var m=Object(n.useContext)(E),p=Object(g.g)(),f=Object(n.useCallback)((function(e,t){return ut(o,e,t)}),[o]),b=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt(o,t.id);case 3:m({type:"success",message:"Tag deleted successfully"}),a&&a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[o,a,m]),"Delete Tag",Object(n.useCallback)((function(e){return e.name}),[])),h=Object(s.a)(b,2),v=h[0],w=h[1],y=[{Header:"Name",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(oa,{tag:t,size:"lg"})}},{Header:" ",Cell:function(e){var t=e.cell.row.original;return"user"===t.scope||"client"===t.scope&&u.role===se.ADMIN||"client"===t.scope&&i.role&&[ie.ADMIN].includes(i.role)?r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{onClick:function(){return p.push("/clients/".concat(o,"/tags/edit/").concat(t.id))}}),r.a.createElement(Rt,{onClick:function(){return w(t)}})):null}}];return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"Tags"),r.a.createElement(ta,{fn:f,pageSize:10,columns:y,refresh:t}),r.a.createElement(v,null))};var da=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage Tags"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement(ma,{refresh:a,onUpdate:function(){return c(!a)}})),r.a.createElement(Ne.a,{md:"5"},r.a.createElement(ia,{onUpdate:function(){return c(!a)}}))))};var pa=function(e){var t=e.onUpdate,a=Object(n.useRef)(null),c=Object(g.i)().clientId;if(!c)throw new Error("Client ID not found");var l=Object(n.useContext)(E),u={platform:"fake",handle:""},i=I.f().shape({platform:I.h().required("Required").label("Platform"),handle:I.h().trim().min(3).required("Required").label("Handle")}),o=Object(n.useState)(!1),m=Object(s.a)(o,2),d=m[0],p=m[1],f=Object(n.useState)(),b=Object(s.a)(f,2),h=b[0],v=b[1];Object(n.useEffect)((function(){p(!!h)}),[h]);var w=function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft(t);case 3:a=e.sent,v(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}throw new Error("Target was supposed to be filled by now");case 2:return e.prev=2,e.next=5,Ot({platform:h.platform,identifier:h.identifier},c);case 5:a.current.resetForm(),l({type:"success",message:"Target created successfully"}),t&&t(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),l({type:"error",message:e.t0.message});case 13:return e.prev=13,v(void 0),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Add Target"),r.a.createElement(k.c,{initialValues:u,validationSchema:i,onSubmit:w,innerRef:a},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"text",name:"handle",label:"Handle",disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Add"))})),r.a.createElement(fa,{show:d,target:h,onClose:function(){v(void 0)},onConfirm:y}))};function fa(e){var t=e.show,a=e.target,c=e.onClose,l=e.onConfirm,u=Object(n.useState)(!1),i=Object(s.a)(u,2),o=i[0],m=i[1];Object(n.useEffect)((function(){m(!1)}),[a]);var d=a?a.profile.name:"Unknown",p=a?a.profile.handle:"Unknown";return r.a.createElement(Gt.a,{show:t},r.a.createElement(Gt.a.Header,null,r.a.createElement(Gt.a.Title,null,"Confirm")),r.a.createElement(Gt.a.Body,null,"Are you sure you want to add ",r.a.createElement("strong",null,d," (@",p,")"),"?"),r.a.createElement(Gt.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:c,disabled:o},"Cancel"),r.a.createElement(S.a,{variant:"primary",onClick:function(){m(!0),l()},disabled:o},"Yes")))}var ba=function(e){var t=e.canDelete,a=e.refresh,c=e.onUpdate,l=Object(g.i)().clientId;if(!l)throw new Error("Client ID not found");var u=Object(n.useContext)(E),i=Object(n.useCallback)((function(e,t){return xt(l,e,t)}),[l]),o=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct(l,t.id);case 3:u({type:"success",message:"Target deleted successfully"}),c&&c(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[l,c,u]),"Delete Target",Object(n.useCallback)((function(e){return e.profile.name}),[])),m=Object(s.a)(o,2),d=m[0],p=m[1],f=[{Header:"Name",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(ca,{target:t,size:"lg"})}},{Header:" ",Cell:function(e){var a=e.cell.row.original;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{onClick:function(){return p(a)}})):null}}];return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"Targets"),r.a.createElement(ta,{fn:i,pageSize:10,columns:f,refresh:a}),r.a.createElement(d,null))};var ha=function(){var e=Object(n.useContext)(d),t=Object(s.a)(e,1)[0],a=t.user,c=t.client;if(!a)throw new Error("User is expected");if(!c)throw new Error("Client is expected");var l=Object(n.useState)(!1),u=Object(s.a)(l,2),i=u[0],o=u[1],m=a.role===se.ADMIN||a.role===se.CLIENT&&!!c.role&&[ie.ADMIN].includes(c.role);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage Targets"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement(ba,{canDelete:m,refresh:i,onUpdate:function(){return o(!i)}})),m&&r.a.createElement(Ne.a,{md:"5"},r.a.createElement(pa,{onUpdate:function(){return o(!i)}}))))};a(433);var Ea=function(e){var t=e.onUpdate,a=Object(n.useContext)(E),c=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name"),settings:I.f({userLimit:I.e().integer().positive().required("Required").label("User limit"),targetLimit:I.e().integer().positive().required("Required").label("Target limit")})}),l=function(){var e=Object(x.a)(j.a.mark((function e(n,r){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.resetForm,e.prev=1,e.next=4,fe(n);case 4:c(),a({type:"success",message:"Client created successfully"}),t&&t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Create new User Group"),r.a.createElement(k.c,{initialValues:{name:"",settings:{userLimit:5,targetLimit:5}},validationSchema:c,onSubmit:l},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"text",name:"name",label:"Name",disabled:t}),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"6",className:"pull-left"},r.a.createElement(le,{type:"number",name:"settings.userLimit",label:"User Limit",min:1,disabled:t})),r.a.createElement(Ne.a,{md:"6"},r.a.createElement(le,{type:"number",name:"settings.targetLimit",label:"Target Limit",min:1,disabled:t}))),r.a.createElement(S.a,{type:"submit",disabled:t},"Save"))})))};a(434);function va(e){var t=e.client,a=e.size,n=void 0===a?"lg":a,c=e.onClick,l=t.name,s="";return function(e){return void 0!==e.clientRole}(t)&&(s=me[t.clientRole]),r.a.createElement("div",{onClick:c,className:"client-view client-view-".concat(n)},r.a.createElement("div",{className:"client-text"},r.a.createElement("span",{className:"client-text-up"},l),"lg"===n&&r.a.createElement("span",{className:"client-text-down"},s)))}var ga=function(e){var t=e.refresh,a=e.onUpdate,c=Object(g.g)(),l=Object(n.useContext)(d),u=Object(s.a)(l,2)[1],o=Object(n.useContext)(E),m={id:"",name:"",settings:{targetLimit:0,userLimit:0}},p=Object(n.useState)(m),f=Object(s.a)(p,2),b=f[0],h=f[1],v=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name"),settings:I.f({userLimit:I.e().integer().positive().required("Required").label("User limit"),targetLimit:I.e().integer().positive().required("Required").label("Target limit")})}),w=Object(n.useState)(!1),y=Object(s.a)(w,2),O=y[0],C=y[1],N=Object(n.useCallback)((function(e,t){return he(e,t)}),[]),S=[{Header:"Name",Cell:function(e){var t=e.row.original;return b.id===t.id?r.a.createElement(le,{type:"text",name:"name",disabled:O}):r.a.createElement(va,{client:t,size:"lg"})}},{Header:"User Limit",Cell:function(e){var t=e.row.original;return b.id===t.id?r.a.createElement(le,{type:"number",name:"settings.userLimit",min:1,disabled:O}):t.settings.userLimit}},{Header:"Target Limit",Cell:function(e){var t=e.row.original;return b.id===t.id?r.a.createElement(le,{type:"number",name:"settings.targetLimit",min:1,disabled:O}):t.settings.targetLimit}},{Header:" ",Cell:function(e){var t=e.row.original;return b.id===t.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(At,{type:"submit"}),r.a.createElement(Tt,{onClick:function(){return h(m)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{onClick:function(){return h(t)}}),r.a.createElement(Lt,{onClick:function(){return function(e){c.push("/clients/".concat(e.id,"/dashboard")),u({type:"SET_CLIENT",client:{id:e.id,name:e.name}})}(t)}}))}}],T=function(){var e=Object(x.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),e.prev=1,b){e.next=4;break}throw new Error("Expected initial values");case 4:return n=t.id,r=Object(i.a)(t,["id"]),e.next=7,we(r,n);case 7:h(m),o({type:"success",message:"Client created successfully"}),a&&a(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),o({type:"error",message:e.t0.message});case 15:return e.prev=15,C(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"User Groups"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:b,validationSchema:v,onSubmit:T},r.a.createElement(k.b,null,r.a.createElement(ta,{fn:N,pageSize:10,columns:S,refresh:t}))))};var wa=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage User Groups"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement(ga,{refresh:a,onUpdate:function(){return c(!a)}})),r.a.createElement(Ne.a,{md:"5"},r.a.createElement(Ea,{onUpdate:function(){return c(!a)}}))))};function ya(e){var t=e.result;return r.a.createElement("div",null,r.a.createElement("h4",null,"Keyword Lists"),r.a.createElement("div",{className:"space-between-y"},r.a.createElement(ke.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,t.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(Qt,{keywordlist:e})))}))))))}var Oa=function(){var e=Object(g.g)(),t=D(X)((function(t){var a=t.result;return r.a.createElement(Ut,{entity:"Users",count:null===a||void 0===a?void 0:a.total,onAdd:function(){return e.push("/users")}})})),a=D(he)((function(t){var a=t.result;return r.a.createElement(Ut,{entity:"Clients",count:null===a||void 0===a?void 0:a.total,onAdd:function(){return e.push("/clients")}})})),n=D(qe),c=n((function(t){var a=t.result;return r.a.createElement(Ut,{entity:"Keyword Lists",count:null===a||void 0===a?void 0:a.total,onAdd:function(){return e.push("/keywordlists")}})})),l=D(vt)((function(t){var a=t.result;return r.a.createElement(Ut,{entity:"Targets",count:null===a||void 0===a?void 0:a.total,onAdd:function(){return e.push("/targets")}})})),s=D($e)((function(t){var a=t.result;return r.a.createElement(Ut,{entity:"Tags",count:null===a||void 0===a?void 0:a.total,onAdd:function(){return e.push("/tags")}})})),u=n((function(e){var t=e.error,a=e.result;return a?r.a.createElement(ya,{result:a}):r.a.createElement("div",null,null===t||void 0===t?void 0:t.message)}));return r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{xs:"5"},r.a.createElement(t,null),r.a.createElement(a,null),r.a.createElement(c,null),r.a.createElement(l,null),r.a.createElement(s,null)),r.a.createElement(Ne.a,{xs:{span:5,offset:1},className:"shadow-box"},r.a.createElement(u,null)))};var ja=function(e){var t=e.onUpdate,a=Object(g.i)().editId,c=Object(n.useContext)(E),l=Object(n.useState)({name:"",keywords:[]}),u=Object(s.a)(l,2),i=u[0],o=u[1],m=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name"),keywords:I.a(I.h().trim().min(3).max(50).label("Keyword")).required("Required").label("Keyword list")});Object(n.useEffect)((function(){function e(){return(e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le(t);case 3:a=e.sent,o({name:a.name,keywords:a.keywords}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a&&function(t){e.apply(this,arguments)}(a)}),[a,c]);var d=function(){var e=Object(x.a)(j.a.mark((function e(n,r){var l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r.resetForm,e.prev=1,!a){e.next=8;break}return e.next=5,Te(n,a);case 5:c({type:"success",message:"Keyword list edited successfully"}),e.next=12;break;case 8:return e.next=10,Se(n);case 10:l(),c({type:"success",message:"Keyword list created successfully"});case 12:t&&t(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),c({type:"error",message:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,a?"Edit":"Create"," Keyword List"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:i,validationSchema:m,onSubmit:d},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"text",name:"name",label:"Name",disabled:t}),r.a.createElement(_t,{name:"keywords",label:"Keywords",disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Save"))})))};var xa=function(e){var t=e.refresh,a=e.onUpdate,c=Object(n.useContext)(E),l=Object(g.g)(),u=Object(n.useCallback)((function(e,t){return qe(e,t)}),[]),i=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ue(t.id);case 3:c({type:"success",message:"Keyword list deleted"}),a&&a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[a,c]),"Delete Keyword List",Object(n.useCallback)((function(e){return e.name}),[])),o=Object(s.a)(i,2),m=o[0],d=o[1],p=[{Header:"Name",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(Qt,{keywordlist:t,size:"lg"})}},{Header:" ",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{onClick:function(){return l.push("/keywordlists/edit/".concat(t.id))}}),r.a.createElement(Rt,{onClick:function(){return d(t)}}))}}];return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"Keyword Lists"),r.a.createElement(ta,{fn:u,pageSize:10,columns:p,refresh:t}),r.a.createElement(m,null))};var ka=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage Keyword Lists"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement(xa,{refresh:a,onUpdate:function(){return c(!a)}})),r.a.createElement(Ne.a,{md:"5"},r.a.createElement(ja,{onUpdate:function(){return c(!a)}}))))},Ca=a(268),Na=a(273),Sa=a.n(Na);a(435),a(436);function Ia(e){var t=e.onChange,a=Object(k.d)(e),c=Object(s.a)(a,3),l=c[0],u=c[1],i=c[2],o=Object(n.useCallback)((function(){return i.setTouched(!0)}),[i]),m=Object(n.useCallback)((function(e){i.setValue(e),t&&t(e,void 0)}),[i,t]);return r.a.createElement(Ca.a,null,e.label&&r.a.createElement(ce.a.Label,null,e.label),r.a.createElement(Sa.a,Object.assign({dateFormat:"MM/dd/yyyy"},l,e,{placeholderText:e.placeholder,value:void 0,selected:l.value,onBlur:l.onBlur,onChange:m,onFocus:o,className:"form-control"})),u.touched&&u.error?r.a.createElement(ce.a.Control.Feedback,{type:"invalid"},u.error):null)}function Ta(e){var t=Object(n.useCallback)((function(e){return e.id}),[]),a=Object(n.useCallback)((function(e){return e.name}),[]),c=Object(n.useCallback)((function(e){return r.a.createElement(Qt,{keywordlist:e,size:"md"})}),[]),l=Object(n.useCallback)((function(e){return r.a.createElement(Qt,{keywordlist:e,size:"sm"})}),[]);return r.a.createElement(sa,Object.assign({label:"Keyword Lists",getOptionValue:t,getOptionLabel:a,renderOption:c,renderSelectedOption:l,debounce:500},e))}function Ra(e){var t=Object(n.useCallback)((function(e){return e.id}),[]),a=Object(n.useCallback)((function(e){return e.name}),[]),c=Object(n.useCallback)((function(e){return r.a.createElement(oa,{tag:e,size:"md"})}),[]),l=Object(n.useCallback)((function(e){return r.a.createElement(oa,{tag:e,size:"sm"})}),[]);return r.a.createElement(sa,Object.assign({label:"Tags",getOptionValue:t,getOptionLabel:a,renderOption:c,renderSelectedOption:l,debounce:500},e))}var qa=function(){var e=Object(n.useContext)(d);if(!Object(s.a)(e,1)[0].user)throw new Error("User expected");var t=Object(g.i)().clientId;if(!t)throw new Error("Client ID not found");var a=Object(g.g)(),c={tags:[],targets:[],keywordlists:[],keywords:[],from:new Date,to:new Date},l=Object(g.h)();l.state&&(c=l.state);var u=I.f().shape({tags:I.a().when("targets",{is:function(e){return e&&e.length>0},then:I.a().min(0),otherwise:I.a().min(1,"Must include a Tag or a Target")}).label("Tags"),targets:I.a().when("tags",{is:function(e){return e&&e.length>0},then:I.a().min(0),otherwise:I.a().min(1,"Must include a Tag or a Target")}).label("Targets"),keywordlists:I.a().when("keywords",{is:function(e){return e&&e.length>0},then:I.a().min(0),otherwise:I.a().min(1,"Must include a Keyword list or a Keyword")}).label("Keyword list"),keywords:I.a().when("keywordlists",{is:function(e){return e&&e.length>0},then:I.a().min(0),otherwise:I.a().min(1,"Must include a Keyword list or a Keyword")}).label("Keywords"),from:I.c().required("Required").label("From Date"),to:I.c().required("Required").label("To Date")},[["tags","targets"],["keywordlists","keywords"]]),i=Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(a){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(t,0,5,a);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),o=Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(a){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(t,0,5,a);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),m=Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(a){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(t,0,5,a);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),p=function(){var e=Object(x.a)(j.a.mark((function e(n){var r,c,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.from.setHours(0,0,0),n.to.setHours(23,59,59),r=new Date,n.to>r&&(n.to=r),c={targets:n.targets.map((function(e){return e.id})),tags:n.tags.map((function(e){return e.id})),keywordlists:n.keywordlists.map((function(e){return e.id})),keywords:n.keywords,from:n.from.toISOString(),to:n.to.toISOString()},l=N.a.stringify(c),a.push("/clients/".concat(t,"/power-search-result?").concat(l),n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Search Query"),r.a.createElement(k.c,{initialValues:c,validationSchema:u,onSubmit:p},(function(e){var t=e.isSubmitting,a=e.values;return r.a.createElement(k.b,null,r.a.createElement(Ra,{name:"tags",fetchOptions:i,disabled:t}),r.a.createElement(ua,{name:"targets",fetchOptions:o,disabled:t}),r.a.createElement(Ta,{name:"keywordlists",fetchOptions:m,disabled:t}),r.a.createElement(_t,{name:"keywords",label:"Keywords",disabled:t}),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"3"},r.a.createElement(Ia,{name:"from",label:"From",selectsStart:!0,startDate:a.from,endDate:a.to,maxDate:a.to,disabled:t})),r.a.createElement(Ne.a,{md:"3"},r.a.createElement(Ia,{name:"to",label:"To",selectsEnd:!0,startDate:a.from,endDate:a.to,minDate:a.from,maxDate:new Date,disabled:t}))),r.a.createElement(S.a,{type:"submit",disabled:t},"Search"))})))};var Aa,La=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Power Search"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"12"},r.a.createElement(qa,null))))};function Da(e,t){return Ua.apply(this,arguments)}function Ua(){return(Ua=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/reports"),method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(e,t,a){return Fa.apply(this,arguments)}function Fa(){return(Fa=Object(x.a)(j.a.mark((function e(t,a,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/reports/").concat(n),method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qa(){return(Qa=Object(x.a)(j.a.mark((function e(t){var a,n,r=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:0,n=r.length>2&&void 0!==r[2]?r[2]:10,e.abrupt("return",B.request({url:"/clients/".concat(t,"/reports?offset=").concat(a,"&limit=").concat(n),method:"get"}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(e,t){return za.apply(this,arguments)}function za(){return(za=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(t,"/reports/").concat(a),method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(e){var t=e.show,a=e.size,n=e.initialValues,c=e.enableReinitialize,l=void 0!==c&&c,s=e.validationSchema,u=e.title,i=e.children,o=e.onClose,m=e.onSubmit;return r.a.createElement(Gt.a,{show:t,size:a,onHide:o},r.a.createElement(k.c,{initialValues:n,enableReinitialize:l,validationSchema:s,onSubmit:m},(function(e){return r.a.createElement(k.b,null,r.a.createElement(Gt.a.Header,null,r.a.createElement(Gt.a.Title,null,u)),r.a.createElement(Gt.a.Body,null,r.a.createElement(i,e)),r.a.createElement(Gt.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:o,disabled:e.isSubmitting},"Cancel"),r.a.createElement(S.a,{variant:"primary",type:"submit",disabled:e.isSubmitting},"Save")))})))}function Ha(e){var t=e.client,a=e.query,c=Object(n.useContext)(E),l=Object(n.useState)(!1),u=Object(s.a)(l,2),i=u[0],o=u[1],m=function(){var e=Object(x.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={name:n.name,query:a},e.next=4,Da(r,t.id);case 4:c({type:"success",message:"Report created successfully"}),o(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:"error",message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),d=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name")});return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{onClick:function(){return o(!0)}},"Create Report"),r.a.createElement(Va,{show:i,title:"Create Report",initialValues:{name:""},validationSchema:d,onSubmit:m,onClose:function(){return o(!1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"After creating the report, you can view it from the \u2018Reports\u2019 section on the left and then export it report as ",r.a.createElement("i",null,".docx")," document."),r.a.createElement("p",null,"Please give it a name so that it is easier to remember:"),r.a.createElement(le,{type:"text",name:"name",label:"Name",disabled:t}))})))}!function(e){e.DAILY="DAILY",e.AS_IT_HAPPENS="AS_IT_HAPPENS"}(Aa||(Aa={}));var Ka,_a={DAILY:"Daily",AS_IT_HAPPENS:"As it happens"};!function(e){e.EMAIL="EMAIL"}(Ka||(Ka={}));var Ya={EMAIL:"Email"};function Ga(e,t){return Ba.apply(this,arguments)}function Ba(){return(Ba=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/search-queries"),method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(e,t,a){return Ja.apply(this,arguments)}function Ja(){return(Ja=Object(x.a)(j.a.mark((function e(t,a,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(a,"/search-queries/").concat(n),method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(){return(Wa=Object(x.a)(j.a.mark((function e(t){var a,n,r=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:0,n=r.length>2&&void 0!==r[2]?r[2]:10,e.abrupt("return",B.request({url:"/clients/".concat(t,"/search-queries?offset=").concat(a,"&limit=").concat(n),method:"get"}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(e,t){return Xa.apply(this,arguments)}function Xa(){return(Xa=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(t,"/search-queries/").concat(a),method:"get"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function en(e,t){return tn.apply(this,arguments)}function tn(){return(tn=Object(x.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.request({url:"/clients/".concat(t,"/search-queries/").concat(a),method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var an=a(276);function nn(e){var t=Object(k.d)(e),a=Object(s.a)(t,2),n=a[0],c=a[1],l={};if(Array.isArray(e.options)){var u,i=Object(an.a)(e.options);try{for(i.s();!(u=i.n()).done;){var o=u.value;l[o]=o}}catch(m){i.e(m)}finally{i.f()}}else l=e.options;return r.a.createElement(ce.a.Group,null,e.label&&r.a.createElement(ce.a.Label,null,e.label),r.a.createElement(ce.a.Control,Object.assign({as:"select",value:"Choose ".concat(e.label)},n,{isInvalid:!(!c.touched||!c.error)}),e.label&&r.a.createElement("option",null,"Choose ".concat(e.label)),Object.keys(l).map((function(e){return r.a.createElement("option",{key:e,value:e},l[e])}))),c.touched&&c.error?r.a.createElement(ce.a.Control.Feedback,{type:"invalid"},c.error):null)}var rn=function(e){var t=e.values,a=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{type:"text",name:"name",label:"Name",disabled:a}),r.a.createElement("hr",null),r.a.createElement("h4",null,"Alerts"),r.a.createElement(k.a,{name:"alerts",render:function(e){return t.alerts.map((function(n,c){return r.a.createElement(r.a.Fragment,{key:c},r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"6"},r.a.createElement(nn,{name:"alerts[".concat(c,"].frequency"),label:"Frequency",options:_a,disabled:a})),1!==Object.keys(Ya).length&&r.a.createElement(Ne.a,{md:"6"},r.a.createElement(nn,{name:"alerts[".concat(c,"].type"),label:"Type",options:Ya,disabled:a}))),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,null,function(e,t,a){switch(e.type){case Ka.EMAIL:return r.a.createElement(_t,{name:t,label:"Email Addresses",disabled:a});default:return null}}(n,"alerts[".concat(c,"].attributes.emailAddresses"),a))),t.alerts.length>1&&r.a.createElement("p",{style:{textAlign:"right"}},r.a.createElement(S.a,{variant:"danger",onClick:function(){return e.remove(c)}},r.a.createElement(St.a,{icon:xe.s})," Remove")))}))}}))};function cn(e){var t=e.onUpdate,a=e.query,c=Object(n.useContext)(E),l=Object(g.i)().clientId;if(!l)throw new Error("Client ID not found");var i=Object(n.useState)(!1),o=Object(s.a)(i,2),m=o[0],d=o[1],p={name:"",alerts:[{frequency:Aa.DAILY,type:Ka.EMAIL,attributes:{emailAddresses:[]}}]},f=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name"),alerts:I.a().of(I.f().shape({frequency:I.h().required("Required").oneOf(Object.values(Aa)).label("Frequency"),type:I.h().required("Required").oneOf(Object.values(Ka)).label("Type"),attributes:I.f().when("type",{is:Ka.EMAIL,then:I.f().shape({emailAddresses:I.a(I.h().email().required("Required").label("Email")).required("Required").label("Email Addresses")})}).label("Attributes")}))}),b=function(){var e=Object(x.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ga(Object(u.a)({},n,{query:a}),l);case 3:c({type:"success",message:"Search Query created successfully"}),d(!1),t&&t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:"error",message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{onClick:function(){return d(!0)}},"Create Search Query"),r.a.createElement(Va,{show:m,size:"lg",title:"Create Search Query",enableReinitialize:!0,initialValues:p,validationSchema:f,onSubmit:b,onClose:function(){return d(!1)}},(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"After creating the search query, you can view it from the \u2018Alerts\u2019 section on the left and then export it report as ",r.a.createElement("i",null,".docx")," document."),r.a.createElement("p",null,"Please give it a name so that it is easier to remember:"),r.a.createElement(rn,e))})))}var ln=function(e){var t=e.user,a=e.client,n=e.query,c=n.from,l=n.to,s=Object(i.a)(n,["from","to"]),o=Object(u.a)({from:c,to:l},s),m=s,d=Object(g.h)(),p=Object(g.g)(),f=!!d.state,b=t.role===se.CLIENT,h=t.role===se.CLIENT;return f||b||h?r.a.createElement("div",{className:"shadow-box d-flex flex-column align-items-center"},f&&r.a.createElement(S.a,{onClick:function(){p.push("/clients/".concat(a.id,"/power-search"),d.state)}},"Go back"),f&&(b||h)&&r.a.createElement("hr",{style:{width:"100%"}}),(b||h)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Save"),b&&r.a.createElement("p",null,r.a.createElement(Ha,{client:a,query:o})),h&&r.a.createElement("p",null,r.a.createElement(cn,{client:a,query:m})))):null};function sn(e,t){return un.apply(this,arguments)}function un(){return(un=Object(x.a)(j.a.mark((function e(t,a){var n,r,c,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:0,r=l.length>3&&void 0!==l[3]?l[3]:10,c=new Date,t.to>c&&(t.to=c),e.abrupt("return",B.request({url:"/clients/".concat(a,"/power-search?offset=").concat(n,"&limit=").concat(r),method:"post",data:t}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var on=a(153);a(493),a(258);function mn(e){var t=e.post,a=e.width,n=t.extras;return r.a.createElement("div",{className:"fake-post"},r.a.createElement("div",{className:"ribbon ribbon-top-left"},r.a.createElement("span",null,"@",t.target.profile.handle)),r.a.createElement("div",{className:"ribbon ribbon-top-right"},r.a.createElement("span",null,"Fake")),r.a.createElement("div",{className:"twitter-post"},r.a.createElement(on.a,{tweetId:n.tweetId,placeholder:r.a.createElement(R,null),options:{width:a}})))}function dn(){return(dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function pn(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var fn=r.a.createElement("g",null,r.a.createElement("path",{d:"M23.615 15.477c-.47-.47-1.23-.47-1.697 0l-1.326 1.326V7.4c0-2.178-1.772-3.95-3.95-3.95h-5.2c-.663 0-1.2.538-1.2 1.2s.537 1.2 1.2 1.2h5.2c.854 0 1.55.695 1.55 1.55v9.403l-1.326-1.326c-.47-.47-1.23-.47-1.697 0s-.47 1.23 0 1.697l3.374 3.375c.234.233.542.35.85.35s.613-.116.848-.35l3.375-3.376c.467-.47.467-1.23-.002-1.697zM12.562 18.5h-5.2c-.854 0-1.55-.695-1.55-1.55V7.547l1.326 1.326c.234.235.542.352.848.352s.614-.117.85-.352c.468-.47.468-1.23 0-1.697L5.46 3.8c-.47-.468-1.23-.468-1.697 0L.388 7.177c-.47.47-.47 1.23 0 1.697s1.23.47 1.697 0L3.41 7.547v9.403c0 2.178 1.773 3.95 3.95 3.95h5.2c.664 0 1.2-.538 1.2-1.2s-.535-1.2-1.198-1.2z"})),bn=function(e){var t=e.svgRef,a=e.title,n=pn(e,["svgRef","title"]);return r.a.createElement("svg",dn({height:15,width:20,fill:"rgb(101, 119, 134)",viewBox:"0 0 24 24",className:"r-1re7ezh r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-1xzupcd",ref:t},n),a?r.a.createElement("title",null,a):null,fn)},hn=r.a.forwardRef((function(e,t){return r.a.createElement(bn,dn({svgRef:t},e))}));a.p;function En(e){var t=e.post;return r.a.createElement("a",{href:"https://twitter.com/".concat(t.target.profile.handle),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"retweeted"},r.a.createElement(hn,null),r.a.createElement("span",{className:"name"},t.target.profile.name," Retweeted")))}function vn(e){var t=e.post,a=e.width,n=void 0===a?550:a,c=t.extras,l=!!c.retweetedStatusId,s=c.retweetedStatusId?c.retweetedStatusId:t.id;return r.a.createElement("div",{className:"twitter-post"},l&&r.a.createElement(En,{post:t}),r.a.createElement(on.a,{tweetId:s,placeholder:r.a.createElement(R,null),options:{width:n}}))}function gn(e){var t=e.post,a=e.width;switch(t.target.platform){case"twitter":return r.a.createElement(vn,{post:t,width:a});case"fake":return r.a.createElement(mn,{post:t,width:a});default:return null}}var wn=function(e){var t=e.client,a=e.query,c=ea(Object(n.useCallback)((function(e,n){return sn(a,t.id,e,n)}),[t.id,a]),10,(function(e){var t=e.data;return 0===e.total?r.a.createElement(r.a.Fragment,null,"No result found"):t.map((function(e,t){return r.a.createElement(gn,{key:t,post:e})})).reduce((function(e,t){return null===e?t:r.a.createElement(r.a.Fragment,null,e,r.a.createElement("hr",null),t)}),null)})),l=Object(s.a)(c,1)[0];return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Search Results"),r.a.createElement(l,null))};function yn(e){return Array.isArray(e)?e:e?[e]:[]}var On=function(){var e=Object(n.useContext)(d),t=Object(s.a)(e,1)[0],a=t.user,c=t.client;if(!a)throw new Error("User expected");if(!c)throw new Error("Client expected");var l=Object(g.h)(),u=N.a.parse(l.search),i={targetIds:yn(u.targets),tagIds:yn(u.tags),keywordlistIds:yn(u.keywordlists),keywords:yn(u.keywords),from:new Date(u.from),to:new Date(u.to)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Power Search"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"8"},r.a.createElement(wn,{query:i,client:c})),r.a.createElement(Ne.a,{md:"3"},r.a.createElement(ln,{query:i,user:a,client:c}))))},jn=a(277),xn=a.n(jn);a(496);function kn(e){var t=e.report,a=e.size,n=void 0===a?"lg":a,c=t.documents;return r.a.createElement("div",{className:"report-view report-view-".concat(n)},r.a.createElement("span",{className:"report-name"},t.name),("lg"===n||"md"===n)&&r.a.createElement(xn.a,{date:t.createdAt}),"lg"===n&&r.a.createElement("div",{className:"report-download"},r.a.createElement(St.a,{icon:xe.d,style:{width:25}}),0===c.length&&"Preparing...",c.length>0&&r.a.createElement(Mt,{total:c.length,limit:c.length},c.map((function(e){return r.a.createElement("a",{key:e.format,href:e.url},e.format)})))))}var Cn=function(e){var t=e.refresh,a=e.onUpdate,c=Object(n.useContext)(d),l=Object(s.a)(c,1)[0],u=l.user,i=l.client;if(!u)throw new Error("User expected");if(!i)throw new Error("Client expected");var o=Object(g.i)().clientId;if(!o)throw new Error("Client ID not found");var m=Object(n.useContext)(E),p={id:"",name:""},f=Object(n.useState)(p),b=Object(s.a)(f,2),h=b[0],v=b[1],w=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name")}),y=Object(n.useState)(!1),O=Object(s.a)(y,2),C=O[0],N=O[1],S=Object(n.useCallback)((function(e,t){return function(e){return Qa.apply(this,arguments)}(o,e,t)}),[o]),T=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pa(o,t.id);case 3:m({type:"success",message:"Report deleted successfully"}),a&&a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[o,a,m]),"Delete Report",Object(n.useCallback)((function(e){return e.name}),[])),R=Object(s.a)(T,2),q=R[0],A=R[1],L=[{Header:"Name",Cell:function(e){var t=e.row.original;return h.id===t.id?r.a.createElement(le,{type:"text",name:"name",disabled:C}):r.a.createElement(kn,{report:t,size:"lg"})}},{Header:" ",Cell:function(e){var t=e.row.original;return h.id===t.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(At,{type:"submit"}),r.a.createElement(Tt,{onClick:function(){return v(p)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{onClick:function(){return v(t)}}),r.a.createElement(Rt,{onClick:function(){return A(t)}}))}}],D=function(){var e=Object(x.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),e.prev=1,h){e.next=4;break}throw new Error("Expected initial values");case 4:return n=t.id,r=t.name,c={name:r},e.next=8,Ma(c,o,n);case 8:v(p),m({type:"success",message:"Report updated successfully"}),a&&a(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),m({type:"error",message:e.t0.message});case 16:return e.prev=16,N(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",{className:"modal-title"},"Reports"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:h,validationSchema:w,onSubmit:D},r.a.createElement(k.b,null,r.a.createElement(ta,{fn:S,pageSize:10,columns:L,refresh:t}))),r.a.createElement(q,null))};var Nn=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Reports"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"8"},r.a.createElement(Cn,{refresh:a,onUpdate:function(){return c(!a)}}))))};var Sn=function(e){var t=e.onUpdate,a=e.query,c=Object(n.useContext)(E),l=Object(g.i)(),i=l.clientId,o=l.editId;if(!i)throw new Error("Client ID not found");var m={frequency:Aa.DAILY,type:Ka.EMAIL,attributes:{emailAddresses:[]}},d=Object(n.useState)({name:"",alerts:[m]}),p=Object(s.a)(d,2),f=p[0],b=p[1],h=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name"),alerts:I.a().of(I.f().shape({frequency:I.h().required("Required").oneOf(Object.values(Aa)).label("Frequency"),type:I.h().required("Required").oneOf(Object.values(Ka)).label("Type"),attributes:I.f().when("type",{is:Ka.EMAIL,then:I.f().shape({emailAddresses:I.a(I.h().email().required("Required").label("Email")).required("Required").label("Email Addresses")})}).label("Attributes")}))});Object(n.useEffect)((function(){function e(){return(e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}throw new Error("Client ID not found");case 2:return e.prev=2,e.next=5,$a(i,t);case 5:a=e.sent,b({name:a.name,alerts:a.alerts}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}o&&function(t){e.apply(this,arguments)}(o)}),[i,o,c]);var v=function(){var e=Object(x.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!o){e.next=7;break}return e.next=4,Za(n,i,o);case 4:c({type:"success",message:"Search Query updated successfully"}),e.next=11;break;case 7:if(!a){e.next=11;break}return e.next=10,Ga(Object(u.a)({},n,{query:a}),i);case 10:c({type:"success",message:"Search Query created successfully"});case 11:t&&t(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),c({type:"error",message:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,o?"Edit":"Create"," Search Query"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:f,validationSchema:h,onSubmit:v},(function(e){return r.a.createElement(k.b,null,r.a.createElement(rn,e),r.a.createElement(S.a,{type:"submit",disabled:e.isSubmitting},"Save"))})))},In=a(521);function Tn(e,t){Object(n.useEffect)((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),function(){document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}}),[e,t])}a(497);var Rn=function(e){var t=e.dropdownButtonValue,a=e.dropdownMenuItems,c=Object(n.useState)(!1),l=Object(s.a)(c,2),u=l[0],i=l[1],o=r.a.useRef(null);return Tn(o,(function(){return i(!1)})),r.a.createElement("div",{className:"dropdown",ref:o},r.a.createElement("div",{className:"dropdown-btn",onClick:function(){return i(!u)}},t),u&&r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},a.map((function(e,t){return r.a.createElement("button",{key:t,className:"dropdown-item",onClick:e.onClick},e.text)}))))};a(498);function qn(e){var t=e.fn,a=e.headingFn,c=e.dropdownMenuFn,l=e.renderItem,u=e.pageSize,i=e.refresh,o=void 0!==i&&i,m=ea(t,u,Object(n.useCallback)((function(e){var t=e.data;return r.a.createElement(In.a,{fluid:!0,className:"paginated-grid-layout"},r.a.createElement(Ce.a,null,t.map((function(e,t){var n=c(e);return r.a.createElement(Ne.a,{key:t,sm:12,md:12,lg:12,xl:6},r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",{className:"with-dropdown"},a(e),r.a.createElement(Rn,{dropdownButtonValue:r.a.createElement(St.a,{icon:xe.f}),dropdownMenuItems:n})),l(e)))}))))}),[a,c,l])),d=Object(s.a)(m,2),p=d[0],f=d[1];return Object(n.useEffect)((function(){f()}),[o,f]),r.a.createElement(p,null)}a(499);var An=function(e){var t=e.clientId,a=e.query,c=q(Object(n.useCallback)((function(){var e=new Date,n=new Date(e.getDate()-1728e5);return sn(Object(u.a)({},a,{from:n,to:e}),t)}),[t,a])),l=c.loading,s=c.result,i=c.error;return l?r.a.createElement(R,null):i?r.a.createElement(r.a.Fragment,null,"Error: ",i.message):!s||s&&0===s.data.length?r.a.createElement(r.a.Fragment,null,"No posts in the last 48 hours"):r.a.createElement("div",{className:"search-query-timeline"},s.data.map((function(e,t){return r.a.createElement(gn,{key:t,post:e})})).reduce((function(e,t){return null===e?t:r.a.createElement(r.a.Fragment,null,e,r.a.createElement("hr",null),t)}),null))};var Ln=function(e){var t=e.refresh,a=e.onUpdate,c=Object(g.g)(),l=Object(n.useContext)(E),u=Object(g.i)().clientId;if(!u)throw new Error("Client ID not found");var i=Object(n.useCallback)((function(e,t){return function(e){return Wa.apply(this,arguments)}(u,e,t)}),[u]),o=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,en(u,t.id);case 3:l({type:"success",message:"Search Query has been deleted"}),a&&a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[u,a,l]),"Delete Search Query",Object(n.useCallback)((function(e){return e.name}),[])),m=Object(s.a)(o,2),d=m[0],p=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(qn,{fn:i,headingFn:function(e){return"Feed for ".concat(e.name)},dropdownMenuFn:function(e){return[{text:"Edit",onClick:function(){return c.push("/clients/".concat(u,"/alerts/edit/").concat(e.id))}},{text:"Delete",onClick:function(){return p(e)}}]},renderItem:function(e){return r.a.createElement(An,{clientId:u,query:e.query})},pageSize:6,refresh:t}),r.a.createElement(d,null))};var Dn=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Alerts"),r.a.createElement(Ln,{refresh:a,onUpdate:function(){return c(!a)}}))};var Un=function(e){var t=e.onUpdate,a=Object(n.useContext)(E),c=I.f().shape({email:I.h().email().required("Required").label("Email")}),l=function(){var e=Object(x.a)(j.a.mark((function e(n,r){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.resetForm,e.prev=1,e.next=4,l=n,B.request({url:"/users",method:"post",data:l});case 4:c(),a({type:"success",message:"Super User Created Successfully"}),t&&t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}var l}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Invite a new Super Admin"),r.a.createElement(k.c,{initialValues:{email:""},validationSchema:c,onSubmit:l},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"email",name:"email",label:"Email",disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Invite"))})))};a(500);function Mn(e){var t=e.user,a=e.size,n=void 0===a?"lg":a,c=e.onClick,l="",s="";return t.invitationAccepted?(l="".concat(t.firstName," ").concat(t.lastName),s=t.email):(l=t.email,s="Invitation pending"),r.a.createElement("div",{onClick:c,className:"user-view user-view-".concat(n)},r.a.createElement("div",{className:"user-text"},r.a.createElement("span",{className:"user-text-up"},l),"lg"===n&&r.a.createElement("span",{className:"user-text-down"},s)))}var Fn=function(e){var t=e.refresh,a=e.onUpdate,c=Object(n.useContext)(E),l=Object(n.useContext)(d),u=Object(s.a)(l,1)[0].user;if(!u)throw new Error("User not found");var i=Object(n.useState)(!1),o=Object(s.a)(i,2),m=o[0],p=o[1],f=Object(n.useCallback)((function(e,t){return X(e,t)}),[]),b=function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,a=t.id,B.request({url:"/users/".concat(a,"/resend-invitation"),method:"post"});case 4:c({type:"success",message:"Invitation sent"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c({type:"error",message:e.t0.message});case 10:return e.prev=10,p(!1),e.finish(10);case 13:case"end":return e.stop()}var a}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),h=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,n=t.id,B.request({url:"/users/".concat(n),method:"delete"});case 4:c({type:"success",message:"User deleted successfully"}),a&&a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"error",message:e.t0.message});case 11:return e.prev=11,p(!1),e.finish(11);case 14:case"end":return e.stop()}var n}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),[a,c]),"Delete User",Object(n.useCallback)((function(e){return e.email}),[])),v=Object(s.a)(h,2),g=v[0],w=v[1],y=[{Header:"User",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(Mn,{user:t,size:"lg"})}},{Header:"Role",Cell:function(e){var t=e.cell.row.original;return oe[t.role]}},{Header:" ",Cell:function(e){var t=e.row.original;return u.id===t.id?"":r.a.createElement(r.a.Fragment,null,!t.invitationAccepted&&r.a.createElement(Dt,{title:"Resend invitation",onClick:Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b(t));case 1:case"end":return e.stop()}}),e)}))),disabled:m}),r.a.createElement(Rt,{title:"Delete",onClick:function(){return w(t)},disabled:m}))}}];return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"Users"),r.a.createElement(ta,{fn:f,pageSize:10,columns:y,refresh:t}),r.a.createElement(g,null))};var Qn=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage Super Users"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement(Fn,{refresh:a,onUpdate:function(){return c(!a)}})),r.a.createElement(Ne.a,{md:"5"},r.a.createElement(Un,{onUpdate:function(){return c(!a)}}))))};var Pn=function(e){var t=e.onUpdate,a=Object(n.useContext)(E),c=Object(n.useContext)(d);if(!Object(s.a)(c,1)[0].user)throw new Error("User expected");var l=Object(g.i)().editId,u=Object(n.useState)({name:"",targets:[]}),i=Object(s.a)(u,2),o=i[0],m=i[1],p=I.f().shape({name:I.h().trim().min(3).max(50).required("Required").label("Name"),targets:I.a().min(1).required("Required").label("Targets")});Object(n.useEffect)((function(){function e(){return(e=Object(x.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,et(t);case 3:n=e.sent,m({name:n.name,targets:n.targets}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}l&&function(t){e.apply(this,arguments)}(l)}),[l,a]);var f=function(){var e=Object(x.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(0,5,t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(x.a)(j.a.mark((function e(n,r){var c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.resetForm,e.prev=1,s={name:n.name,targetIds:n.targets.map((function(e){return e.id}))},!l){e.next=9;break}return e.next=6,Je(s,l);case 6:a({type:"success",message:"Tag edited successfully"}),e.next=13;break;case 9:return e.next=11,Be(s);case 11:c(),a({type:"success",message:"Tag created successfully"});case 13:t&&t(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),a({type:"error",message:e.t0.message});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,l?"Edit":"Add"," Tag"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:o,validationSchema:p,onSubmit:b},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"text",name:"name",label:"Name",disabled:t}),r.a.createElement(ua,{name:"targets",fetchOptions:f,disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Save"))})))};var zn=function(e){var t=e.refresh,a=e.onUpdate,c=Object(n.useContext)(d);if(!Object(s.a)(c,1)[0].user)throw new Error("User expected");var l=Object(n.useContext)(E),u=Object(g.g)(),i=Object(n.useCallback)((function(e,t){return $e(e,t)}),[]),o=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at(t.id);case 3:l({type:"success",message:"Tag deleted successfully"}),a&&a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[a,l]),"Delete Tag",Object(n.useCallback)((function(e){return e.name}),[])),m=Object(s.a)(o,2),p=m[0],f=m[1],b=[{Header:"Name",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(oa,{tag:t,size:"lg"})}},{Header:" ",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{onClick:function(){return u.push("/tags/edit/".concat(t.id))}}),r.a.createElement(Rt,{onClick:function(){return f(t)}}))}}];return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"Tags"),r.a.createElement(ta,{fn:i,pageSize:10,columns:b,refresh:t}),r.a.createElement(p,null))};var Vn=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage Tags"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement(zn,{refresh:a,onUpdate:function(){return c(!a)}})),r.a.createElement(Ne.a,{md:"5"},r.a.createElement(Pn,{onUpdate:function(){return c(!a)}}))))};var Hn=function(e){var t=e.onUpdate,a=Object(n.useContext)(E),c=Object(n.useRef)(null),l={platform:"fake",handle:""},u=I.f().shape({platform:I.h().required("Required").label("Platform"),handle:I.h().trim().min(3).required("Required").label("Handle")}),i=Object(n.useState)(!1),o=Object(s.a)(i,2),m=o[0],d=o[1],p=Object(n.useState)(),f=Object(s.a)(p,2),b=f[0],h=f[1];Object(n.useEffect)((function(){d(!!b)}),[b]);var v=function(){var e=Object(x.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft(t);case 3:n=e.sent,h(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Target was supposed to be filled by now");case 2:return e.prev=2,e.next=5,ht({platform:b.platform,identifier:b.identifier});case 5:c.current.resetForm(),a({type:"success",message:"Target created successfully"}),t&&t(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a({type:"error",message:e.t0.message});case 13:return e.prev=13,h(void 0),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Add Target"),r.a.createElement(k.c,{initialValues:l,validationSchema:u,onSubmit:v,innerRef:c},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"text",name:"handle",label:"Handle",disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Add"))})),r.a.createElement(Kn,{show:m,target:b,onClose:function(){h(void 0)},onConfirm:g}))};function Kn(e){var t=e.show,a=e.target,c=e.onClose,l=e.onConfirm,u=Object(n.useState)(!1),i=Object(s.a)(u,2),o=i[0],m=i[1];Object(n.useEffect)((function(){m(!1)}),[a]);var d=a?a.profile.name:"Unknown",p=a?a.profile.handle:"Unknown";return r.a.createElement(Gt.a,{show:t},r.a.createElement(Gt.a.Header,null,r.a.createElement(Gt.a.Title,null,"Confirm")),r.a.createElement(Gt.a.Body,null,"Are you sure you want to add ",r.a.createElement("strong",null,d," (@",p,")"),"?"),r.a.createElement(Gt.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:c,disabled:o},"Cancel"),r.a.createElement(S.a,{variant:"primary",onClick:function(){m(!0),l()},disabled:o},"Yes")))}var _n=function(e){var t=e.refresh,a=e.onUpdate,c=Object(n.useContext)(E),l=Object(n.useCallback)((function(e,t){return vt(e,t)}),[]),u=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wt(t.id);case 3:c({type:"success",message:"Target deleted successfully"}),a&&a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[a,c]),"Delete Target",Object(n.useCallback)((function(e){return e.profile.name}),[])),i=Object(s.a)(u,2),o=i[0],m=i[1],d=[{Header:"Name",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(ca,{target:t,size:"lg"})}},{Header:" ",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(Rt,{onClick:function(){return m(t)}})}}];return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"Targets"),r.a.createElement(ta,{fn:l,pageSize:10,columns:d,refresh:t}),r.a.createElement(o,{message:function(e){return r.a.createElement(r.a.Fragment,null,"This action cannot be undone. This will permanently delete the ",r.a.createElement("strong",null,e.profile.name)," target and its associations.")},confirmValue:function(e){return e.profile.handle}}))};var Yn=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage Targets"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement(_n,{refresh:a,onUpdate:function(){return c(!a)}})),r.a.createElement(Ne.a,{md:"5"},r.a.createElement(Hn,{onUpdate:function(){return c(!a)}}))))};var Gn=function(e){var t=e.filter,a=e.refresh,c=e.onUpdate,l=Object(g.g)(),u=Object(n.useContext)(d),i=Object(s.a)(u,2)[1],o=Object(n.useContext)(E),m=Object(n.useState)(!1),p=Object(s.a)(m,2),f=p[0],b=p[1],h=Object(n.useCallback)((function(e,a){return ve(t,e,a)}),[t]),v=function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,a=t.id,B.request({url:"/clients/".concat(a,"/accept-invitation"),method:"post"});case 4:c&&c(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o({type:"error",message:e.t0.message});case 10:return e.prev=10,b(!1),e.finish(10);case 13:case"end":return e.stop()}var a}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),w=[{Header:"Name",Cell:function(e){var t=e.row.original;return r.a.createElement(va,{client:t,size:"lg"})}},{Header:" ",Cell:function(e){var t=e.row.original;return t.invitationAccepted?r.a.createElement(S.a,{onClick:function(){return function(e){l.push("/clients/".concat(e.id,"/dashboard")),i({type:"SET_CLIENT",client:{id:e.id,name:e.name,role:e.clientRole}})}(t)},disabled:f},"Go to Dashboard"):r.a.createElement(S.a,{onClick:function(){return v(t)},disabled:f},"Accept Invitation")}}];return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement(ta,{fn:h,pageSize:10,columns:w,refresh:a}))};var Bn=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Choose User Group"),r.a.createElement(Gn,{filter:"all",refresh:a,onUpdate:function(){return c(!a)}}))};var Zn=function(){var e=Object(n.useContext)(E),t=I.f().shape({currentPassword:I.h().required("Required").label("Current Password"),password:I.h().min(3).max(50).required("Required").label("Password"),confirmPassword:I.h().required("Required").oneOf([I.g("password"),null],"Password must match").label("Confirm Password")}),a=function(){var t=Object(x.a)(j.a.mark((function t(a,n){var r,c,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.resetForm,t.prev=1,c=a.currentPassword,l=a.password,t.next=5,s={currentPassword:c,password:l},B.request({url:"/users/me/password",method:"put",data:s});case 5:r(),e({type:"success",message:"Password changed successfully"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e({type:"error",message:t.t0.message});case 12:case"end":return t.stop()}var s}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Change Password"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:{currentPassword:"",password:"",confirmPassword:""},validationSchema:t,onSubmit:a},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"password",name:"currentPassword",label:"Current Password",disabled:t}),r.a.createElement(le,{type:"password",name:"password",label:"New Password",disabled:t}),r.a.createElement(le,{type:"password",name:"confirmPassword",label:"Confirm Password",disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Save"))})))};var Jn=function(e){var t=e.onUpdate,a=Object(n.useContext)(E),c=q(Object(n.useCallback)((function(){return $("me")}),[])),l=c.error,s=c.loading,u=c.result,i={firstName:u?u.firstName:"",lastName:u?u.lastName:"",email:u?u.email:""},o=I.f().shape({firstName:I.h().trim().min(1).max(50).required("Required").label("First name"),lastName:I.h().trim().min(1).max(50).required("Required").label("Last name")}),m=function(){var e=Object(x.a)(j.a.mark((function e(n){var r,c,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.firstName,c=n.lastName,e.next=4,s={firstName:r,lastName:c},B.request({url:"/users/me",method:"put",data:s});case 4:l=e.sent,t&&t(l),a({type:"success",message:"Profile updated successfully"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}var s}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Edit Profile"),!u&&s&&r.a.createElement(R,null),!u&&l&&l.message,u&&r.a.createElement(k.c,{initialValues:i,validationSchema:o,onSubmit:m},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"6"},r.a.createElement(le,{type:"text",name:"firstName",label:"First name",disabled:t})),r.a.createElement(Ne.a,{md:"6"},r.a.createElement(le,{type:"text",name:"lastName",label:"Last name",disabled:t}))),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"12"},r.a.createElement(le,{type:"email",name:"email",label:"Email",disabled:!0}))),r.a.createElement(S.a,{type:"submit",disabled:t},"Save"))})))};var Wn=function(e){var t=e.onUpdate,a=Object(g.i)().clientId,c=Object(n.useContext)(E),l={email:"",clientRole:ie.ADMIN},s=I.f().shape({email:I.h().email().required("Required").label("Email"),clientRole:I.d().oneOf(Object.keys(me)).label("Role")}),u=function(){var e=Object(x.a)(j.a.mark((function e(n,r){var l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.resetForm,e.prev=1,e.next=4,ee(n,a||"");case 4:l(),c({type:"success",message:"User created successfully"}),t&&t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box"},r.a.createElement("h4",null,"Invite a new User"),r.a.createElement(k.c,{initialValues:l,validationSchema:s,onSubmit:u},(function(e){var t=e.isSubmitting;return r.a.createElement(k.b,null,r.a.createElement(le,{type:"email",name:"email",label:"Email",disabled:t}),r.a.createElement(nn,{label:"Role",name:"clientRole",options:me,disabled:t}),r.a.createElement(S.a,{type:"submit",disabled:t},"Invite"))})))};var $n=function(e){var t=e.refresh,a=e.onUpdate,c=Object(g.i)().clientId;if(!c)throw new Error("Client ID not found");var l=Object(n.useContext)(E),u=Object(n.useContext)(d),i=Object(s.a)(u,1)[0].user;if(!i)throw new Error("User not found");var o={id:"",clientRole:ie.ADMIN},m=Object(n.useState)(o),p=Object(s.a)(m,2),f=p[0],b=p[1],h=I.f().shape({clientRole:I.d().oneOf(Object.keys(me)).label("Role")}),v=Object(n.useState)(!1),w=Object(s.a)(v,2),y=w[0],O=w[1],C=Object(n.useCallback)((function(e,t){return re(c,e,t)}),[c]),N=function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,te(c,t.id);case 4:l({type:"success",message:"Invitation sent"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l({type:"error",message:e.t0.message});case 10:return e.prev=10,O(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),S=Zt(Object(n.useCallback)(function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,ne(c,t.id);case 4:l({type:"success",message:"User deleted successfully"}),a&&a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l({type:"error",message:e.t0.message});case 11:return e.prev=11,O(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),[c,a,l]),"Delete User",Object(n.useCallback)((function(e){return e.email}),[])),T=Object(s.a)(S,2),R=T[0],q=T[1],A=[{Header:"User",Cell:function(e){var t=e.cell.row.original;return r.a.createElement(Mn,{user:t,size:"lg"})}},{Header:"Role",Cell:function(e){var t=e.cell.row.original;return f.id===t.id?r.a.createElement(nn,{name:"clientRole",options:me,disabled:y}):me[t.clientRole]}},{Header:" ",Cell:function(e){var t=e.row.original;return i.id===t.id?"":f.id===t.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(At,{title:"Save",type:"submit",disabled:y}),r.a.createElement(Tt,{title:"Cancel",onClick:function(){return b(o)},disabled:y})):r.a.createElement(r.a.Fragment,null,t.invitationAccepted&&r.a.createElement(qt,{title:"Edit",onClick:function(){return b(t)},disabled:y}),!t.invitationAccepted&&r.a.createElement(Dt,{title:"Resent invitation",onClick:Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N(t));case 1:case"end":return e.stop()}}),e)}))),disabled:y}),r.a.createElement(Rt,{title:"Delete",onClick:function(){return q(t)},disabled:y}))}}],L=function(){var e=Object(x.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,ae({clientRole:t.clientRole},c,f.id);case 4:b(o),l({type:"success",message:"User edited successfully"}),a&&a(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l({type:"error",message:e.t0.message});case 12:return e.prev=12,O(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"shadow-box editable-table"},r.a.createElement("h4",null,"Users"),r.a.createElement(k.c,{enableReinitialize:!0,initialValues:f,validationSchema:h,onSubmit:L},r.a.createElement(k.b,null,r.a.createElement(ta,{fn:C,pageSize:10,columns:A,refresh:t}))),r.a.createElement(R,null))};var Xn=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Manage Users"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"7"},r.a.createElement($n,{refresh:a,onUpdate:function(){return c(!a)}})),r.a.createElement(Ne.a,{md:"5"},r.a.createElement(Wn,{onUpdate:function(){return c(!a)}}))))};var er=function(){return r.a.createElement("h3",null,"Work in progress")},tr=[{component:function(){var e=Object(n.useContext)(d),t=Object(s.a)(e,2),a=t[0].user,c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Settings"),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"6"},r.a.createElement(Jn,{onUpdate:function(e){var t={id:e.id,email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role,invitationAccepted:e.invitationAccepted};c({type:"SET_USER",user:a,profile:t})}}))),r.a.createElement(Ce.a,null,r.a.createElement(Ne.a,{md:"6"},r.a.createElement(Zn,null))))},name:"Settings",url:"/settings",sidebar:!1,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:Oa,name:"Dashboard",url:"/dashboard",sidebar:!0,icon:xe.p,userRoles:[se.ADMIN]},{component:wa,name:"Clients",url:"/clients",sidebar:!0,icon:xe.u,userRoles:[se.ADMIN]},{component:Qn,url:"/users",name:"Users",sidebar:!0,icon:xe.t,userRoles:[se.ADMIN]},{component:ka,url:"/keywordlists",name:"Keyword Lists",sidebar:!0,icon:xe.k,userRoles:[se.ADMIN]},{component:ja,url:"/keywordlists/edit/:editId",name:"Edit Keyword List",sidebar:!1,userRoles:[se.ADMIN]},{component:Yn,name:"Targets",url:"/targets",sidebar:!0,icon:xe.a,userRoles:[se.ADMIN]},{component:Vn,name:"Tags",url:"/tags",sidebar:!0,icon:xe.q,userRoles:[se.ADMIN]},{component:Pn,url:"/tags/edit/:editId",name:"Edit Tag",sidebar:!1,userRoles:[se.ADMIN]},{component:Bn,name:"Choose User Group",url:"/clients",sidebar:!1,icon:xe.u,userRoles:[se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:zt,name:"Dashboard",url:"/clients/:clientId/dashboard",sidebar:!0,icon:xe.p,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:Xn,url:"/clients/:clientId/users",name:"Users",sidebar:!0,icon:xe.t,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN]},{component:na,url:"/clients/:clientId/keywordlists",name:"Keyword Lists",sidebar:!0,icon:xe.k,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{url:"/clients/:clientId/keywordlists/edit/:editId",component:Yt,name:"Edit Keyword List",sidebar:!1,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:ha,name:"Targets",url:"/clients/:clientId/targets",sidebar:!0,icon:xe.a,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:da,name:"Tags",url:"/clients/:clientId/tags",sidebar:!0,icon:xe.q,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:ia,url:"/clients/:clientId/tags/edit/:editId",name:"Edit Tag",sidebar:!1,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:La,name:"Power Search",url:"/clients/:clientId/power-search",sidebar:!0,icon:xe.n,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:On,name:"Power Search",url:"/clients/:clientId/power-search-result",sidebar:!1,icon:xe.n,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:Nn,name:"Reports",url:"/clients/:clientId/reports",sidebar:!0,icon:je.b,userRoles:[se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:Dn,name:"Alerts",url:"/clients/:clientId/alerts",sidebar:!0,icon:je.a,userRoles:[se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:Sn,name:"Edit Alert",url:"/clients/:clientId/alerts/edit/:editId",sidebar:!1,icon:je.a,userRoles:[se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]},{component:er,name:"Insights",url:"/clients/:clientId/insights",sidebar:!0,icon:je.c,userRoles:[se.ADMIN,se.CLIENT],clientRoles:[ie.ADMIN,ie.ANALYST,ie.VETTER]}];function ar(e){var t=e.user,a=e.client;if(!t)return[];var n=tr.filter((function(e){return e.userRoles.includes(t.role)}));return a&&t.role===se.CLIENT&&(n=n.filter((function(e){return e.clientRoles&&a.role&&e.clientRoles.includes(a.role)}))),n}a(501);function nr(){return r.a.createElement("div",{className:"page-not-found"},r.a.createElement(St.a,{icon:je.d,size:"10x"}),r.a.createElement("br",null),r.a.createElement("h1",null,"404"),r.a.createElement("span",null,"Page not found"))}var rr=a(526),cr=a(522),lr=a(269);a(502);var sr=function(){var e=Object(n.useContext)(d),t=Object(s.a)(e,2),a=t[0],c=t[1],l=a.user,u=a.profile,i=a.client;if(!l||!u)throw new Error("User expected");var o=r.a.useRef(null),m=r.a.useState(!1),p=Object(s.a)(m,2),f=p[0],b=p[1],h=Object(g.g)();Tn(o,(function(){return b(!1)}));var E="".concat(u.firstName," ").concat(u.lastName),v="";l.role===se.CLIENT&&i&&i.role&&(v=i.name);var w="";return l.role===se.ADMIN?w=oe[l.role]:l.role===se.CLIENT&&i&&i.role&&(w=me[i.role]),r.a.createElement(rr.a,{expand:"lg"},r.a.createElement(ce.a,{inline:!0},r.a.createElement(cr.a,{className:"border"},r.a.createElement(lr.a,{"aria-label":"Default","aria-describedby":"inputGroup-sizing-default",placeholder:"Search usernames"}),r.a.createElement(cr.a.Prepend,null,r.a.createElement(S.a,null,"Search")))),r.a.createElement(rr.a.Collapse,{className:"justify-content-end"},r.a.createElement("div",{className:"dropdown",ref:o},r.a.createElement("div",{className:"dropdown-btn",onClick:function(){return b(!f)}},r.a.createElement("div",{className:"user-name"},E),l.role===se.ADMIN&&r.a.createElement("div",{className:"company"},w),l.role===se.CLIENT&&r.a.createElement("div",{className:"company"},v," - ",w)),f&&r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},r.a.createElement("button",{className:"dropdown-item",onClick:function(){h.push("/settings"),b(!1)}},r.a.createElement(St.a,{icon:xe.e}),r.a.createElement("span",null,"Settings")),l.role===se.CLIENT&&r.a.createElement("button",{className:"dropdown-item",onClick:function(){h.push("/clients"),b(!1)}},r.a.createElement(St.a,{icon:xe.u}),r.a.createElement("span",null,"Switch User Group")),r.a.createElement("button",{className:"dropdown-item",onClick:function(){c({type:"LOGOUT"}),b(!1),h.push("/")}},r.a.createElement(St.a,{icon:xe.o}),r.a.createElement("span",null,"Logout"))))))},ur=a(525),ir=a(32);function or(e){var t=e.style,a=void 0===t?{fill:"#6c757c"}:t;return r.a.createElement("svg",{style:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 130 30",width:"130",height:"30"},r.a.createElement("path",{id:"square",d:"M10.63 8.03L24.13 8.03L24.13 21.56L10.63 21.56L10.63 8.03Z"}),r.a.createElement("path",{id:"text",d:"M36.1 22.57Q35.49 22.57 35.14 22.24Q34.8 21.9 34.8 21.3L34.8 9.15Q34.8 8.55 35.14 8.22Q35.49 7.88 36.1 7.88L40.22 7.88Q43.82 7.88 45.8 9.82Q47.8 11.74 47.8 15.22Q47.8 18.72 45.8 20.65Q43.82 22.57 40.22 22.57L36.1 22.57ZM37.49 20.38L40.05 20.38Q45.12 20.38 45.12 15.22Q45.12 10.07 40.05 10.07L37.49 10.07L37.49 20.38ZM56.01 18.57Q55.35 18.57 54.91 18.13Q54.47 17.67 54.47 17.01Q54.47 16.34 54.91 15.9Q55.35 15.44 56.01 15.44Q56.68 15.44 57.12 15.9Q57.55 16.34 57.55 17.01Q57.55 17.67 57.12 18.13Q56.68 18.57 56.01 18.57ZM68.49 22.67Q67.87 22.67 67.49 22.32Q67.14 21.94 67.14 21.34L67.14 10.09L63.35 10.09Q62.1 10.09 62.1 8.99Q62.1 7.88 63.35 7.88L73.62 7.88Q74.87 7.88 74.87 8.99Q74.87 10.09 73.62 10.09L69.82 10.09L69.82 21.34Q69.82 21.94 69.45 22.32Q69.1 22.67 68.49 22.67ZM78.57 22.57Q77.97 22.57 77.62 22.24Q77.28 21.9 77.28 21.3L77.28 9.15Q77.28 8.55 77.62 8.22Q77.97 7.88 78.57 7.88L86.1 7.88Q86.7 7.88 87.03 8.15Q87.37 8.42 87.37 8.92Q87.37 9.44 87.03 9.74Q86.7 10.01 86.1 10.01L79.91 10.01L79.91 14.05L85.68 14.05Q86.28 14.05 86.62 14.32Q86.95 14.59 86.95 15.11Q86.95 15.61 86.62 15.88Q86.28 16.15 85.68 16.15L79.91 16.15L79.91 20.44L86.1 20.44Q86.7 20.44 87.03 20.74Q87.37 21.01 87.37 21.53Q87.37 22.03 87.03 22.3Q86.7 22.57 86.1 22.57L78.57 22.57ZM96.91 22.76Q94.78 22.76 93.18 21.84Q91.6 20.92 90.74 19.22Q89.89 17.51 89.89 15.22Q89.89 12.92 90.74 11.24Q91.6 9.53 93.18 8.61Q94.78 7.69 96.91 7.69Q98.28 7.69 99.49 8.11Q100.7 8.51 101.64 9.28Q101.91 9.49 102.01 9.72Q102.12 9.94 102.12 10.28Q102.12 10.74 101.87 11.05Q101.62 11.36 101.26 11.36Q100.85 11.36 100.41 11.07Q99.51 10.4 98.74 10.15Q97.97 9.88 97.03 9.88Q94.87 9.88 93.74 11.24Q92.64 12.59 92.64 15.22Q92.64 17.86 93.74 19.22Q94.87 20.57 97.03 20.57Q97.93 20.57 98.68 20.3Q99.45 20.03 100.41 19.38Q100.62 19.26 100.82 19.17Q101.03 19.09 101.26 19.09Q101.62 19.09 101.87 19.4Q102.12 19.72 102.12 20.17Q102.12 20.49 102.01 20.74Q101.91 20.97 101.64 21.17Q100.7 21.94 99.49 22.36Q98.28 22.76 96.91 22.76ZM116.78 7.78Q117.39 7.78 117.74 8.15Q118.1 8.51 118.1 9.11L118.1 21.34Q118.1 21.94 117.72 22.32Q117.37 22.69 116.78 22.69Q116.18 22.69 115.82 22.32Q115.47 21.94 115.47 21.34L115.47 16.19L107.95 16.19L107.95 21.34Q107.95 21.94 107.57 22.32Q107.22 22.69 106.62 22.69Q106.03 22.69 105.66 22.32Q105.3 21.94 105.3 21.34L105.3 9.11Q105.3 8.51 105.66 8.15Q106.01 7.78 106.62 7.78Q107.22 7.78 107.57 8.15Q107.95 8.51 107.95 9.11L107.95 14.03L115.47 14.03L115.47 9.11Q115.47 8.51 115.82 8.15Q116.18 7.78 116.78 7.78Z"}))}a(503);function mr(e){var t=e.title,a=e.routes,c=Object(n.useContext)(d),l=Object(s.a)(c,1)[0].client;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ur.a.Item,{className:"role-head"},t),a.map((function(e,t){var a=e.url;if(-1!==a.indexOf("/:clientId")){var n=l?l.id:"unknown";a=a.replace("/:clientId","/".concat(n))}return r.a.createElement(ur.a.Link,{as:ir.a,to:a,key:t},r.a.createElement(St.a,{icon:e.icon?e.icon:xe.c,size:"sm",className:"icon"}),e.name)})))}var dr=function(){var e=Object(n.useContext)(d),t=Object(s.a)(e,1)[0],a=t.user,c=t.client;if(!a)throw new Error("User expected");var l=ar({user:a,client:c}).filter((function(e){return e.sidebar})),u=l.filter((function(e){return 1===e.userRoles.length&&e.userRoles.includes(se.ADMIN)})),i=l.filter((function(e){return e.userRoles.includes(se.CLIENT)})),o=null;a.role===se.ADMIN&&(o=r.a.createElement(mr,{title:"Administrator",routes:u}));var m=null;return c&&(m=r.a.createElement(mr,{title:c.name,routes:i.filter((function(e){var t;return!(a.role!==se.ADMIN||!e.userRoles.includes(se.ADMIN))||!!c.role&&(null===(t=e.clientRoles)||void 0===t?void 0:t.includes(c.role))}))})),r.a.createElement("nav",{className:"col-sm-2 d-sm-block sidebar"},r.a.createElement("div",{className:"company-logo"},r.a.createElement(or,{style:{fill:"white"}})),r.a.createElement("div",{className:"sidebar-sticky"}),r.a.createElement(ur.a,{className:"nav flex-column"},o,m))};a(504);var pr=function(e){var t=Object(n.useContext)(d);return Object(s.a)(t,1)[0].user?r.a.createElement("div",{className:"private-layout"},r.a.createElement(dr,null),r.a.createElement("div",{className:"container-layout"},r.a.createElement(sr,null),r.a.createElement("div",{className:"container-fluid"},e.children))):null};a(505);var fr=function(e){var t=Object(n.useContext)(d);return Object(s.a)(t,1)[0].user?null:r.a.createElement("div",{className:"floating-container"},r.a.createElement("div",{className:"box"},r.a.createElement(or,null),r.a.createElement("hr",null),e.children))};function br(){var e=Object(n.useContext)(d),t=ar(Object(s.a)(e,1)[0]);return r.a.createElement(g.c,{history:y},r.a.createElement(fr,null,r.a.createElement(g.d,null,r.a.createElement(g.a,{path:"/",exact:!0,to:"/login"}),r.a.createElement(g.b,{path:"/login",render:function(){return r.a.createElement(Oe,null)}}),r.a.createElement(g.b,{path:"/accept-invitation",render:function(){return r.a.createElement(ue,null)}}),r.a.createElement(g.a,{path:"*",exact:!0,to:"/login"}))),r.a.createElement(pr,null,r.a.createElement(g.d,null,r.a.createElement(g.a,{path:"/",exact:!0,to:"/landing"}),r.a.createElement(g.b,{path:"/landing",render:function(){return r.a.createElement(de,null)}}),t.map((function(e,t){return r.a.createElement(g.b,{path:e.url,key:t,exact:!0,render:function(){return r.a.createElement(e.component,null)}})})),r.a.createElement(g.b,{path:"*",render:function(){return r.a.createElement(nr,null)}}))))}var hr=function(){return r.a.createElement(f,null,r.a.createElement(v,null,r.a.createElement(br,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(506);l.a.render(r.a.createElement(hr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[283,1,2]]]);
//# sourceMappingURL=main.4b60ba88.chunk.js.map